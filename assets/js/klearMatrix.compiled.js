("undefined"==typeof Crypto||!Crypto.util)&&function(){var b=window.Crypto={},a=b.util={rotl:function(a,b){return a<<b|a>>>32-b},rotr:function(a,b){return a<<32-b|a>>>b},endian:function(b){if(b.constructor==Number)return a.rotl(b,8)&16711935|a.rotl(b,24)&4278255360;for(var c=0;c<b.length;c++)b[c]=a.endian(b[c]);return b},randomBytes:function(a){for(var b=[];0<a;a--)b.push(Math.floor(256*Math.random()));return b},bytesToWords:function(a){for(var b=[],c=0,g=0;c<a.length;c++,g+=8)b[g>>>5]|=(a[c]&255)<<
24-g%32;return b},wordsToBytes:function(a){for(var b=[],c=0;c<32*a.length;c+=8)b.push(a[c>>>5]>>>24-c%32&255);return b},bytesToHex:function(a){for(var b=[],c=0;c<a.length;c++)b.push((a[c]>>>4).toString(16)),b.push((a[c]&15).toString(16));return b.join("")},hexToBytes:function(a){for(var b=[],c=0;c<a.length;c+=2)b.push(parseInt(a.substr(c,2),16));return b},bytesToBase64:function(a){if("function"==typeof btoa)return btoa(c.bytesToString(a));for(var b=[],f=0;f<a.length;f+=3)for(var g=a[f]<<16|a[f+1]<<
8|a[f+2],i=0;4>i;i++)8*f+6*i<=8*a.length?b.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(g>>>6*(3-i)&63)):b.push("=");return b.join("")},base64ToBytes:function(a){if("function"==typeof atob)return c.stringToBytes(atob(a));for(var a=a.replace(/[^A-Z0-9+\/]/ig,""),b=[],f=0,g=0;f<a.length;g=++f%4)0!=g&&b.push(("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a.charAt(f-1))&Math.pow(2,-2*g+8)-1)<<2*g|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(a.charAt(f))>>>
6-2*g);return b}},b=b.charenc={};b.UTF8={stringToBytes:function(a){return c.stringToBytes(unescape(encodeURIComponent(a)))},bytesToString:function(a){return decodeURIComponent(escape(c.bytesToString(a)))}};var c=b.Binary={stringToBytes:function(a){for(var b=[],c=0;c<a.length;c++)b.push(a.charCodeAt(c)&255);return b},bytesToString:function(a){for(var b=[],c=0;c<a.length;c++)b.push(String.fromCharCode(a[c]));return b.join("")}}}();
(function(){var b=Crypto,a=b.util,c=b.charenc,d=c.UTF8,e=c.Binary,f=b.MD5=function(b,c){var d=a.wordsToBytes(f._md5(b));return c&&c.asBytes?d:c&&c.asString?e.bytesToString(d):a.bytesToHex(d)};f._md5=function(b){b.constructor==String&&(b=d.stringToBytes(b));for(var c=a.bytesToWords(b),j=8*b.length,b=1732584193,e=-271733879,h=-1732584194,k=271733878,l=0;l<c.length;l++)c[l]=(c[l]<<8|c[l]>>>24)&16711935|(c[l]<<24|c[l]>>>8)&4278255360;c[j>>>5]|=128<<j%32;c[(j+64>>>9<<4)+14]=j;for(var j=f._ff,o=f._gg,p=
f._hh,n=f._ii,l=0;l<c.length;l+=16)var y=b,t=e,w=h,r=k,b=j(b,e,h,k,c[l+0],7,-680876936),k=j(k,b,e,h,c[l+1],12,-389564586),h=j(h,k,b,e,c[l+2],17,606105819),e=j(e,h,k,b,c[l+3],22,-1044525330),b=j(b,e,h,k,c[l+4],7,-176418897),k=j(k,b,e,h,c[l+5],12,1200080426),h=j(h,k,b,e,c[l+6],17,-1473231341),e=j(e,h,k,b,c[l+7],22,-45705983),b=j(b,e,h,k,c[l+8],7,1770035416),k=j(k,b,e,h,c[l+9],12,-1958414417),h=j(h,k,b,e,c[l+10],17,-42063),e=j(e,h,k,b,c[l+11],22,-1990404162),b=j(b,e,h,k,c[l+12],7,1804603682),k=j(k,b,
e,h,c[l+13],12,-40341101),h=j(h,k,b,e,c[l+14],17,-1502002290),e=j(e,h,k,b,c[l+15],22,1236535329),b=o(b,e,h,k,c[l+1],5,-165796510),k=o(k,b,e,h,c[l+6],9,-1069501632),h=o(h,k,b,e,c[l+11],14,643717713),e=o(e,h,k,b,c[l+0],20,-373897302),b=o(b,e,h,k,c[l+5],5,-701558691),k=o(k,b,e,h,c[l+10],9,38016083),h=o(h,k,b,e,c[l+15],14,-660478335),e=o(e,h,k,b,c[l+4],20,-405537848),b=o(b,e,h,k,c[l+9],5,568446438),k=o(k,b,e,h,c[l+14],9,-1019803690),h=o(h,k,b,e,c[l+3],14,-187363961),e=o(e,h,k,b,c[l+8],20,1163531501),
b=o(b,e,h,k,c[l+13],5,-1444681467),k=o(k,b,e,h,c[l+2],9,-51403784),h=o(h,k,b,e,c[l+7],14,1735328473),e=o(e,h,k,b,c[l+12],20,-1926607734),b=p(b,e,h,k,c[l+5],4,-378558),k=p(k,b,e,h,c[l+8],11,-2022574463),h=p(h,k,b,e,c[l+11],16,1839030562),e=p(e,h,k,b,c[l+14],23,-35309556),b=p(b,e,h,k,c[l+1],4,-1530992060),k=p(k,b,e,h,c[l+4],11,1272893353),h=p(h,k,b,e,c[l+7],16,-155497632),e=p(e,h,k,b,c[l+10],23,-1094730640),b=p(b,e,h,k,c[l+13],4,681279174),k=p(k,b,e,h,c[l+0],11,-358537222),h=p(h,k,b,e,c[l+3],16,-722521979),
e=p(e,h,k,b,c[l+6],23,76029189),b=p(b,e,h,k,c[l+9],4,-640364487),k=p(k,b,e,h,c[l+12],11,-421815835),h=p(h,k,b,e,c[l+15],16,530742520),e=p(e,h,k,b,c[l+2],23,-995338651),b=n(b,e,h,k,c[l+0],6,-198630844),k=n(k,b,e,h,c[l+7],10,1126891415),h=n(h,k,b,e,c[l+14],15,-1416354905),e=n(e,h,k,b,c[l+5],21,-57434055),b=n(b,e,h,k,c[l+12],6,1700485571),k=n(k,b,e,h,c[l+3],10,-1894986606),h=n(h,k,b,e,c[l+10],15,-1051523),e=n(e,h,k,b,c[l+1],21,-2054922799),b=n(b,e,h,k,c[l+8],6,1873313359),k=n(k,b,e,h,c[l+15],10,-30611744),
h=n(h,k,b,e,c[l+6],15,-1560198380),e=n(e,h,k,b,c[l+13],21,1309151649),b=n(b,e,h,k,c[l+4],6,-145523070),k=n(k,b,e,h,c[l+11],10,-1120210379),h=n(h,k,b,e,c[l+2],15,718787259),e=n(e,h,k,b,c[l+9],21,-343485551),b=b+y>>>0,e=e+t>>>0,h=h+w>>>0,k=k+r>>>0;return a.endian([b,e,h,k])};f._ff=function(b,a,c,d,e,f,l){b=b+(a&c|~a&d)+(e>>>0)+l;return(b<<f|b>>>32-f)+a};f._gg=function(b,a,c,d,e,f,l){b=b+(a&d|c&~d)+(e>>>0)+l;return(b<<f|b>>>32-f)+a};f._hh=function(b,a,c,d,e,f,l){b=b+(a^c^d)+(e>>>0)+l;return(b<<f|b>>>
32-f)+a};f._ii=function(b,a,c,d,e,f,l){b=b+(c^(a|~d))+(e>>>0)+l;return(b<<f|b>>>32-f)+a};f._blocksize=16;f._digestsize=16})();(function(b){function a(d){this.filter(a.resizableFilterSelector).each(function(){new c(b(this),d)});return this}function c(c,d){c.data("AutoResizer")&&c.data("AutoResizer").destroy();d=this.config=b.extend({},a.defaults,d);this.el=c;this.nodeName=c[0].nodeName.toLowerCase();this.originalHeight=c.height();this.previousScrollTop=null;this.value=c.val();"original"===d.maxWidth&&(d.maxWidth=c.width());"original"===d.minWidth&&(d.minWidth=c.width());"original"===d.maxHeight&&(d.maxHeight=c.height());
"original"===d.minHeight&&(d.minHeight=c.height());"textarea"===this.nodeName&&c.css({resize:"none",overflowY:"hidden"});c.data("AutoResizer",this);d.animate.complete=function(b){return function(){d.onAfterResize.call(c);return b.apply(this,arguments)}}(d.animate.complete);this.bind()}var d="ar"+ +new Date;a.defaults={onStartCheck:function(){},onResize:function(){},onBeforeResize:function(){return 123},onAfterResize:function(){return 555},animate:{duration:200,complete:function(){}},extraSpace:50,
minHeight:"original",maxHeight:500,minWidth:"original",maxWidth:"500"};a.cloneCSSProperties="lineHeight textDecoration letterSpacing fontSize fontFamily fontStyle fontWeight textTransform textAlign direction wordSpacing fontSizeAdjust paddingTop paddingLeft paddingBottom paddingRight width".split(" ");a.cloneCSSValues={position:"absolute",top:-9999,left:-9999,opacity:0,overflow:"hidden"};a.resizableFilterSelector=["textarea:not(textarea."+d+")","input:not(input[type]),input[type=text],input[type=password],input[type=email],input[type=url]"].join();
a.AutoResizer=c;b.fn.autoResize=a;c.prototype={bind:function(){var a=b.proxy(function(){this.check();return!0},this);this.unbind();this.el.bind("keyup.autoResize",a).bind("change.autoResize",a).bind("paste.autoResize",function(){setTimeout(function(){a()},100)});this.el.is(":hidden")||this.check(null,!0)},unbind:function(){this.el.unbind(".autoResize")},createClone:function(){var c=this.el,f="textarea"===this.nodeName?c.clone():b("<span/>");this.clone=f;b.each(a.cloneCSSProperties,function(b,a){f[0].style[a]=
c.css(a)});f.removeAttr("name").removeAttr("id").addClass(d).attr("tabIndex",-1).css(a.cloneCSSValues);"textarea"===this.nodeName?f.height("auto"):f.width("auto").css({whiteSpace:"nowrap"})},check:function(b,a){this.clone||(this.createClone(),this.injectClone());var g=this.config,c=this.clone,d=this.el,m=d.val();if(m===this.prevValue)return!0;this.prevValue=m;g.onStartCheck.call(d);if("input"===this.nodeName){c.text(m);var c=c.width(),c=c+g.extraSpace>=g.minWidth?c+g.extraSpace:g.minWidth,m=d.width(),
h="function"==typeof g.maxWidth?g.maxWidth.apply(this):g.maxWidth,h=h-g.extraSpace,c=Math.min(c,h);if(c<m&&c>=g.minWidth||c>=g.minWidth&&c<=h)g.onBeforeResize.call(d),g.onResize.call(d),"text"!=d.attr("type")&&d.scrollLeft(0),g.animate&&!a?d.stop(1,1).animate({width:c},g.animate):(d.width(c),g.onAfterResize.call(d))}else if(c.width(d.width()).height(0).val(m).scrollTop(1E4),c=c[0].scrollTop,this.previousScrollTop!==c)(this.previousScrollTop=c,c+g.extraSpace>=g.maxHeight?(d.css("overflowY",""),c=g.maxHeight,
a=!0):c<=g.minHeight?c=g.minHeight:(d.css("overflowY","hidden"),c+=g.extraSpace),g.onBeforeResize.call(d),g.onResize.call(d),g.animate&&!a)?d.stop(1,1).animate({height:c},g.animate):(d.height(c),g.onAfterResize.call(d))},destroy:function(){this.unbind();this.el.removeData("AutoResizer");this.clone.remove();delete this.el;delete this.clone},injectClone:function(){(a.cloneContainer||(a.cloneContainer=b("<arclones/>").appendTo("body"))).append(this.clone)}}})(jQuery);(function(b){var a=window.console||function(){},c={debug:!1,RODom:!1,patternLibrary:{phone:/([\+][0-9]{1,3}([ \.\-])?)?([\(]{1}[0-9]{3}[\)])?([0-9A-Z \.\-]{1,32})((x|ext|extension)?[0-9]{1,4}?)/,email:/((([a-zA-Z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-zA-Z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?/,
url:/(https?|ftp):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?/,
number:/-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?/,dateISO:/\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}/,alpha:/[a-zA-Z]+/,alphaNumeric:/\w+/,integer:/-?\d+/},classPrefix:"h5-",errorClass:"ui-state-error",validClass:"ui-state-valid",activeClass:"active",requiredClass:"required",requiredAttribute:"required",patternAttribute:"pattern",errorAttribute:"data-h5-errorid",customEvents:{validate:!0},kbSelectors:":input:not(:button):not(:disabled):not(.novalidate)",focusout:!0,focusin:!1,change:!0,keyup:!1,activeKeyup:!0,
mSelectors:'[type="range"]:not(:disabled):not(.novalidate), :radio:not(:disabled):not(.novalidate), :checkbox:not(:disabled):not(.novalidate), select:not(:disabled):not(.novalidate), option:not(:disabled):not(.novalidate)',click:!0,requiredVar:"h5-required",patternVar:"h5-pattern",stripMarkup:!0,submit:!0,invalidCallback:function(){},validCallback:function(){},validateOnSubmit:!0,allValidSelectors:":input:visible:not(:button):not(:disabled):not(.novalidate)",markInvalid:function(a){var c=b(a.element),
d=b(a.errorID);c.addClass(a.errorClass).removeClass(a.validClass);c.addClass(a.settings.activeClass);d.length&&(c.attr("title")&&d.text(c.attr("title")),d.show());c.data("valid",!1);a.settings.invalidCallback.call(a.element,a.validity);return c},markValid:function(a){var c=b(a.element),d=b(a.errorID);c.addClass(a.validClass).removeClass(a.errorClass);d.length&&d.hide();c.data("valid",!0);a.settings.validCallback.call(a.element,a.validity);return c},unmark:function(a){var c=b(a.element);c.removeClass(a.errorClass).removeClass(a.validClass);
c.form.find("#"+a.element.id).removeClass(a.errorClass).removeClass(a.validClass);return c}},d=c.patternLibrary,e={isValid:function(){var a=b(this);a.trigger("validate");return a.data("valid")},allValid:function(a){var c=!0,d=[],e=b(this);e.find(a.allValidSelectors).each(function(){b(this).bind("validated",function(a,b){b.e=a;d.push(b)});c=b(this).h5Validate("isValid")&&c});e.trigger("formValidated",{valid:c,elements:d});return c},validate:function(c){var d=b(this),e=d.filter("[pattern]")[0]?d.attr("pattern"):
!1,f=RegExp("^(?:"+e+")$"),h=d.is("[type=checkbox]")||d.is("[type=radio]")?d.is(":checked"):d.val(),k=c.errorClass,l=c.validClass,o=d.attr(c.errorAttribute)||!1,o=o?"#"+o:!1,p=!1,n;n={element:this,valid:!0};n=b.extend({customError:n.customError||!1,patternMismatch:n.patternMismatch||!1,rangeOverflow:n.rangeOverflow||!1,rangeUnderflow:n.rangeUnderflow||!1,stepMismatch:n.stepMismatch||!1,tooLong:n.tooLong||!1,typeMismatch:n.typeMismatch||!1,valid:n.valid||!0,valueMissing:n.valueMissing||!1},n);p=b("<input required>");
p=p.filter("[required]")&&p.filter("[required]").length?d.filter("[required]").length&&"false"!==d.attr("required"):void 0!==d.attr("required");c.debug&&window.console&&(a.log('Validate called on "'+h+'" with regex "'+f+'". Required: '+p),a.log("Regex test: "+f.test(h)+", Pattern: "+e));p&&!h?(n.valid=!1,n.valueMissing=!0):e&&!f.test(h)&&h?(n.valid=!1,n.patternMismatch=!0):(n.valid=!0,c.RODom||c.markValid({element:this,validity:n,errorClass:k,validClass:l,errorID:o,settings:c}));n.valid||c.RODom||
c.markInvalid({element:this,validity:n,errorClass:k,validClass:l,errorID:o,settings:c});d.trigger("validated",n)},delegateEvents:function(a,c,d,e){var f=[],k=0,l=function(){e.validate.call(this,e)};b.each(c,function(a,b){b&&(f[a]=a)});for(k in f)f.hasOwnProperty(k)&&b(d).delegate(a,f[k]+".h5Validate",l);return d},bindDelegation:function(a){b.each(d,function(c,d){var e=d.toString(),e=e.substring(1,e.length-1);b("."+a.classPrefix+c).attr("pattern",e)});b(this).filter("form").attr("novalidate","novalidate");
b(this).find("form").attr("novalidate","novalidate");b(this).parents("form").attr("novalidate","novalidate");return this.each(function(){var b={focusout:a.focusout,focusin:a.focusin,change:a.change,keyup:a.keyup},c={click:a.click},d={keyup:a.activeKeyup};a.delegateEvents(":input",a.customEvents,this,a);a.delegateEvents(a.kbSelectors,b,this,a);a.delegateEvents(a.mSelectors,c,this,a);a.delegateEvents(a.activeClassSelector,d,this,a)})}},f=[];b.h5Validate={addPatterns:function(a){var b=c.patternLibrary,
d;for(d in a)a.hasOwnProperty(d)&&(b[d]=a[d]);return b},validValues:function(a,c){for(var d=0,e=c.length,f="",d=0;d<e;d+=1)f=f?f+"|"+c[d]:c[d];d=RegExp("^(?:"+f+")$");b(a).data("regex",d)}};b.fn.h5Validate=function(a){var d,j,m;if("string"===typeof a&&"function"===typeof e[a])return m=b(this).closest("[data-h5-instanceId]"),m=f[m.attr("data-h5-instanceId")],j=[].slice.call(arguments,0),d=a,j.shift(),j=b.merge(j,[m]),m[d].apply(this,j);m=b.extend({},c,a,e);d=m.classPrefix+m.activeClass;d=m=b.extend(m,
{activeClass:d,activeClassSelector:"."+d,requiredClass:m.classPrefix+m.requiredClass});j=f.push(d)-1;!0!==d.RODom&&b(this).attr("data-h5-instanceId",j);b(this).trigger("instance",{"data-h5-instanceId":j});return e.bindDelegation.call(this,m)}})(jQuery);(function(b,a){"function"===typeof define&&define.amd?define(["jquery"],a):a(b.jQuery)})(this,function(b,a){b.fn.jPlayer=function(c){var d="string"===typeof c,e=Array.prototype.slice.call(arguments,1),f=this,c=!d&&e.length?b.extend.apply(null,[!0,c].concat(e)):c;if(d&&"_"===c.charAt(0))return f;d?this.each(function(){var d=b.data(this,"jPlayer"),i=d&&b.isFunction(d[c])?d[c].apply(d,e):d;if(i!==d&&i!==a)return f=i,!1}):this.each(function(){var a=b.data(this,"jPlayer");a?a.option(c||{}):b.data(this,
"jPlayer",new b.jPlayer(c,this))});return f};b.jPlayer=function(a,c){if(arguments.length){this.element=b(c);this.options=b.extend(!0,{},this.options,a);var d=this;this.element.bind("remove.jPlayer",function(){d.destroy()});this._init()}};b.jPlayer.emulateMethods="load play pause";b.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate";b.jPlayer.emulateOptions="muted volume";b.jPlayer.reservedEvent="ready flashreset resize repeat error warning";b.jPlayer.event=
{};b.each("ready flashreset resize repeat click error warning loadstart progress suspend abort emptied stalled play pause loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange".split(" "),function(){b.jPlayer.event[this]="jPlayer_"+this});b.jPlayer.htmlEvent="loadstart abort emptied stalled loadedmetadata loadeddata canplay canplaythrough ratechange".split(" ");b.jPlayer.pause=function(){b.each(b.jPlayer.prototype.instances,
function(a,b){b.data("jPlayer").status.srcSet&&b.jPlayer("pause")})};b.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""};var c=function(){this.init()};c.prototype={init:function(){this.options={timeFormat:b.jPlayer.timeFormat}},time:function(a){var b=new Date(1E3*(a&&"number"===typeof a?a:0)),c=b.getUTCHours(),a=this.options.timeFormat.showHour?b.getUTCMinutes():b.getUTCMinutes()+60*c,b=this.options.timeFormat.showMin?b.getUTCSeconds():
b.getUTCSeconds()+60*a,c=this.options.timeFormat.padHour&&10>c?"0"+c:c,a=this.options.timeFormat.padMin&&10>a?"0"+a:a,b=this.options.timeFormat.padSec&&10>b?"0"+b:b,c=""+(this.options.timeFormat.showHour?c+this.options.timeFormat.sepHour:""),c=c+(this.options.timeFormat.showMin?a+this.options.timeFormat.sepMin:"");return c+(this.options.timeFormat.showSec?b+this.options.timeFormat.sepSec:"")}};var d=new c;b.jPlayer.convertTime=function(a){return d.time(a)};b.jPlayer.uaBrowser=function(a){var a=a.toLowerCase(),
b=/(opera)(?:.*version)?[ \/]([\w.]+)/,c=/(msie) ([\w.]+)/,d=/(mozilla)(?:.*? rv:([\w.]+))?/,a=/(webkit)[ \/]([\w.]+)/.exec(a)||b.exec(a)||c.exec(a)||0>a.indexOf("compatible")&&d.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}};b.jPlayer.uaPlatform=function(a){var b=a.toLowerCase(),c=/(android)/,d=/(mobile)/,a=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/.exec(b)||[],b=/(ipad|playbook)/.exec(b)||!d.exec(b)&&c.exec(b)||[];a[1]&&(a[1]=a[1].replace(/\s/g,"_"));return{platform:a[1]||
"",tablet:b[1]||""}};b.jPlayer.browser={};b.jPlayer.platform={};var e=b.jPlayer.uaBrowser(navigator.userAgent);e.browser&&(b.jPlayer.browser[e.browser]=!0,b.jPlayer.browser.version=e.version);e=b.jPlayer.uaPlatform(navigator.userAgent);e.platform&&(b.jPlayer.platform[e.platform]=!0,b.jPlayer.platform.mobile=!e.tablet,b.jPlayer.platform.tablet=!!e.tablet);b.jPlayer.getDocMode=function(){var a;b.jPlayer.browser.msie&&(document.documentMode?a=document.documentMode:(a=5,document.compatMode&&"CSS1Compat"===
document.compatMode&&(a=7)));return a};b.jPlayer.browser.documentMode=b.jPlayer.getDocMode();b.jPlayer.nativeFeatures={init:function(){var a=document,b=a.createElement("video"),c={w3c:"fullscreenEnabled fullscreenElement requestFullscreen exitFullscreen fullscreenchange fullscreenerror".split(" "),moz:"mozFullScreenEnabled mozFullScreenElement mozRequestFullScreen mozCancelFullScreen mozfullscreenchange mozfullscreenerror".split(" "),webkit:["","webkitCurrentFullScreenElement","webkitRequestFullScreen",
"webkitCancelFullScreen","webkitfullscreenchange"],webkitVideo:["webkitSupportsFullscreen","webkitDisplayingFullscreen","webkitEnterFullscreen","webkitExitFullscreen",""]},d=["w3c","moz","webkit","webkitVideo"],e,f;this.fullscreen=b={support:{w3c:!!a[c.w3c[0]],moz:!!a[c.moz[0]],webkit:"function"===typeof a[c.webkit[3]],webkitVideo:"function"===typeof b[c.webkitVideo[2]]},used:{}};e=0;for(f=d.length;e<f;e++){var l=d[e];if(b.support[l]){b.spec=l;b.used[l]=!0;break}}if(b.spec){var o=c[b.spec];b.api=
{fullscreenEnabled:!0,fullscreenElement:function(b){b=b?b:a;return b[o[1]]},requestFullscreen:function(a){return a[o[2]]()},exitFullscreen:function(b){b=b?b:a;return b[o[3]]()}};b.event={fullscreenchange:o[4],fullscreenerror:o[5]}}else b.api={fullscreenEnabled:!1,fullscreenElement:function(){return null},requestFullscreen:function(){},exitFullscreen:function(){}},b.event={}}};b.jPlayer.nativeFeatures.init();b.jPlayer.focus=null;b.jPlayer.keyIgnoreElementNames="INPUT TEXTAREA";var f=function(a){var c=
b.jPlayer.focus,d;c&&(b.each(b.jPlayer.keyIgnoreElementNames.split(/\s+/g),function(b,c){if(a.target.nodeName.toUpperCase()===c.toUpperCase())return d=!0,!1}),d||b.each(c.options.keyBindings,function(d,e){if(e&&a.which===e.key&&b.isFunction(e.fn))return a.preventDefault(),e.fn(c),!1}))};b.jPlayer.keys=function(a){b(document.documentElement).unbind("keydown.jPlayer");a&&b(document.documentElement).bind("keydown.jPlayer",f)};b.jPlayer.keys(!0);b.jPlayer.prototype={count:0,version:{script:"2.3.0",needFlash:"2.3.0",
flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",preload:"metadata",volume:0.8,muted:!1,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",currentTime:".jp-current-time",duration:".jp-duration",
fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen",repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution"},smoothPlayBar:!1,fullScreen:!1,fullWindow:!1,autohide:{restored:!1,full:!0,fadeIn:200,fadeOut:600,hold:1E3},loop:!1,repeat:function(a){a.jPlayer.options.loop?b(this).unbind(".jPlayerRepeat").bind(b.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){b(this).jPlayer("play")}):b(this).unbind(".jPlayerRepeat")},nativeVideoControls:{},noFullWindow:{msie:/msie [0-6]\./,
ipad:/ipad.*?os [0-4]\./,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/},noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/,playbook:/playbook/},timeFormat:{},keyEnabled:!1,audioFullScreen:!1,keyBindings:{play:{key:32,
fn:function(a){a.status.paused?a.play():a.pause()}},fullScreen:{key:13,fn:function(a){(a.status.video||a.options.audioFullScreen)&&a._setOption("fullScreen",!a.options.fullScreen)}},muted:{key:8,fn:function(a){a._muted(!a.options.muted)}},volumeUp:{key:38,fn:function(a){a.volume(a.options.volume+0.1)}},volumeDown:{key:40,fn:function(a){a.volume(a.options.volume-0.1)}}},verticalVolume:!1,idPrefix:"jp",noConflict:"jQuery",emulateHtml:!1,errorAlerts:!1,warningAlerts:!1},optionsAudio:{size:{width:"0px",
height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"480px",height:"270px",cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,videoWidth:0,videoHeight:0,readyState:0,networkState:0,playbackRate:1,ended:0},
internal:{ready:!1},solution:{html:!0,flash:!0},format:{mp3:{codec:'audio/mpeg; codecs="mp3"',flashCanPlay:!0,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis"',flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},fla:{codec:"audio/x-flv",flashCanPlay:!0,media:"audio"},rtmpa:{codec:'audio/rtmp; codecs="rtmp"',
flashCanPlay:!0,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:!1,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:!0,media:"video"},rtmpv:{codec:'video/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"video"}},_init:function(){var c=this;this.element.empty();this.status=b.extend({},this.status);this.internal=
b.extend({},this.internal);this.options.timeFormat=b.extend({},b.jPlayer.timeFormat,this.options.timeFormat);this.internal.cmdsIgnored=b.jPlayer.platform.ipad||b.jPlayer.platform.iphone||b.jPlayer.platform.ipod;this.internal.domNode=this.element.get(0);this.options.keyEnabled&&!b.jPlayer.focus&&(b.jPlayer.focus=this);this.formats=[];this.solutions=[];this.require={};this.htmlElement={};this.html={};this.html.audio={};this.html.video={};this.flash={};this.css={};this.css.cs={};this.css.jq={};this.ancestorJq=
[];this.options.volume=this._limitValue(this.options.volume,0,1);b.each(this.options.supplied.toLowerCase().split(","),function(a,d){var e=d.replace(/^\s+|\s+$/g,"");if(c.format[e]){var i=!1;b.each(c.formats,function(a,b){if(e===b)return i=!0,!1});i||c.formats.push(e)}});b.each(this.options.solution.toLowerCase().split(","),function(a,d){var e=d.replace(/^\s+|\s+$/g,"");if(c.solution[e]){var i=!1;b.each(c.solutions,function(a,b){if(e===b)return i=!0,!1});i||c.solutions.push(e)}});this.internal.instance=
"jp_"+this.count;this.instances[this.internal.instance]=this.element;this.element.attr("id")||this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count);this.internal.self=b.extend({},{id:this.element.attr("id"),jq:this.element});this.internal.audio=b.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:a});this.internal.video=b.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:a});this.internal.flash=b.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:a,swf:this.options.swfPath+
(".swf"!==this.options.swfPath.toLowerCase().slice(-4)?(this.options.swfPath&&"/"!==this.options.swfPath.slice(-1)?"/":"")+"Jplayer.swf":"")});this.internal.poster=b.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:a});b.each(b.jPlayer.event,function(b,d){c.options[b]!==a&&(c.element.bind(d+".jPlayer",c.options[b]),c.options[b]=a)});this.require.audio=!1;this.require.video=!1;b.each(this.formats,function(a,b){c.require[c.format[b].media]=!0});this.options=this.require.video?b.extend(!0,
{},this.optionsVideo,this.options):b.extend(!0,{},this.optionsAudio,this.options);this._setSize();this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow);this.status.noVolume=this._uaBlocklist(this.options.noVolume);b.jPlayer.nativeFeatures.fullscreen.api.fullscreenEnabled&&this._fullscreenAddEventListeners();this._restrictNativeVideoControls();this.htmlElement.poster=document.createElement("img");this.htmlElement.poster.id=
this.internal.poster.id;this.htmlElement.poster.onload=function(){(!c.status.video||c.status.waitForPlay)&&c.internal.poster.jq.show()};this.element.append(this.htmlElement.poster);this.internal.poster.jq=b("#"+this.internal.poster.id);this.internal.poster.jq.css({width:this.status.width,height:this.status.height});this.internal.poster.jq.hide();this.internal.poster.jq.bind("click.jPlayer",function(){c._trigger(b.jPlayer.event.click)});this.html.audio.available=!1;this.require.audio&&(this.htmlElement.audio=
document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio));this.html.video.available=!1;this.require.video&&(this.htmlElement.video=document.createElement("video"),this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video));this.flash.available=this._checkForFlash(10.1);
this.html.canPlay={};this.flash.canPlay={};b.each(this.formats,function(a,b){c.html.canPlay[b]=c.html[c.format[b].media].available&&""!==c.htmlElement[c.format[b].media].canPlayType(c.format[b].codec);c.flash.canPlay[b]=c.format[b].flashCanPlay&&c.flash.available});this.html.desired=!1;this.flash.desired=!1;b.each(this.solutions,function(a,d){if(0===a)c[d].desired=!0;else{var e=!1,i=!1;b.each(c.formats,function(a,b){c[c.solutions[0]].canPlay[b]&&("video"===c.format[b].media?i=!0:e=!0)});c[d].desired=
c.require.audio&&!e||c.require.video&&!i}});this.html.support={};this.flash.support={};b.each(this.formats,function(a,b){c.html.support[b]=c.html.canPlay[b]&&c.html.desired;c.flash.support[b]=c.flash.canPlay[b]&&c.flash.desired});this.html.used=!1;this.flash.used=!1;b.each(this.solutions,function(a,d){b.each(c.formats,function(a,b){if(c[d].support[b])return c[d].used=!0,!1})});this._resetActive();this._resetGate();this._cssSelectorAncestor(this.options.cssSelectorAncestor);!this.html.used&&!this.flash.used?
(this._error({type:b.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:b.jPlayer.errorMsg.NO_SOLUTION,hint:b.jPlayer.errorHint.NO_SOLUTION}),this.css.jq.noSolution.length&&this.css.jq.noSolution.show()):this.css.jq.noSolution.length&&this.css.jq.noSolution.hide();if(this.flash.used){var d,e="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;
if(b.jPlayer.browser.msie&&(9>Number(b.jPlayer.browser.version)||9>b.jPlayer.browser.documentMode)){e=['<param name="movie" value="'+this.internal.flash.swf+'" />','<param name="FlashVars" value="'+e+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'];d=document.createElement('<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0" tabindex="-1"></object>');
for(var f=0;f<e.length;f++)d.appendChild(document.createElement(e[f]))}else f=function(a,b,c){var d=document.createElement("param");d.setAttribute("name",b);d.setAttribute("value",c);a.appendChild(d)},d=document.createElement("object"),d.setAttribute("id",this.internal.flash.id),d.setAttribute("data",this.internal.flash.swf),d.setAttribute("type","application/x-shockwave-flash"),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("tabindex","-1"),f(d,"flashvars",e),f(d,"allowscriptaccess",
"always"),f(d,"bgcolor",this.options.backgroundColor),f(d,"wmode",this.options.wmode);this.element.append(d);this.internal.flash.jq=b(d)}this.html.used&&(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=b("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),this.element.append(this.htmlElement.video),this.internal.video.jq=
b("#"+this.internal.video.id),this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):this.internal.video.jq.css({width:"0px",height:"0px"}),this.internal.video.jq.bind("click.jPlayer",function(){c._trigger(b.jPlayer.event.click)})));this.options.emulateHtml&&this._emulateHtmlBridge();this.html.used&&!this.flash.used&&setTimeout(function(){c.internal.ready=!0;c.version.flash="n/a";c._trigger(b.jPlayer.event.repeat);c._trigger(b.jPlayer.event.ready)},
100);this._updateNativeVideoControls();this._updateInterface();this._updateButtons(!1);this._updateAutohide();this._updateVolume(this.options.volume);this._updateMute(this.options.muted);this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide();b.jPlayer.prototype.count++},destroy:function(){this.clearMedia();this._removeUiClass();this.css.jq.currentTime.length&&this.css.jq.currentTime.text("");this.css.jq.duration.length&&this.css.jq.duration.text("");b.each(this.css.jq,function(a,b){b.length&&
b.unbind(".jPlayer")});this.internal.poster.jq.unbind(".jPlayer");this.internal.video.jq&&this.internal.video.jq.unbind(".jPlayer");this._fullscreenRemoveEventListeners();this===b.jPlayer.focus&&(b.jPlayer.focus=null);this.options.emulateHtml&&this._destroyHtmlBridge();this.element.removeData("jPlayer");this.element.unbind(".jPlayer");this.element.empty();delete this.instances[this.internal.instance]},enable:function(){},disable:function(){},_testCanPlayType:function(a){try{return a.canPlayType(this.format.mp3.codec),
!0}catch(b){return!1}},_uaBlocklist:function(a){var c=navigator.userAgent.toLowerCase(),d=!1;b.each(a,function(a,b){if(b&&b.test(c))return d=!0,!1});return d},_restrictNativeVideoControls:function(){this.require.audio&&this.status.nativeVideoControls&&(this.status.nativeVideoControls=!1,this.status.noFullWindow=!0)},_updateNativeVideoControls:function(){this.html.video.available&&this.html.used&&(this.htmlElement.video.controls=this.status.nativeVideoControls,this._updateAutohide(),this.status.nativeVideoControls&&
this.require.video?(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})):this.status.waitForPlay&&this.status.video&&(this.internal.poster.jq.show(),this.internal.video.jq.css({width:"0px",height:"0px"})))},_addHtmlEventListeners:function(a,c){var d=this;a.preload=this.options.preload;a.muted=this.options.muted;a.volume=this.options.volume;a.addEventListener("progress",function(){c.gate&&(d.internal.cmdsIgnored&&0<this.readyState&&(d.internal.cmdsIgnored=
!1),d._getHtmlStatus(a),d._updateInterface(),d._trigger(b.jPlayer.event.progress))},!1);a.addEventListener("timeupdate",function(){c.gate&&(d._getHtmlStatus(a),d._updateInterface(),d._trigger(b.jPlayer.event.timeupdate))},!1);a.addEventListener("durationchange",function(){c.gate&&(d._getHtmlStatus(a),d._updateInterface(),d._trigger(b.jPlayer.event.durationchange))},!1);a.addEventListener("play",function(){c.gate&&(d._updateButtons(!0),d._html_checkWaitForPlay(),d._trigger(b.jPlayer.event.play))},
!1);a.addEventListener("playing",function(){c.gate&&(d._updateButtons(!0),d._seeked(),d._trigger(b.jPlayer.event.playing))},!1);a.addEventListener("pause",function(){c.gate&&(d._updateButtons(!1),d._trigger(b.jPlayer.event.pause))},!1);a.addEventListener("waiting",function(){c.gate&&(d._seeking(),d._trigger(b.jPlayer.event.waiting))},!1);a.addEventListener("seeking",function(){c.gate&&(d._seeking(),d._trigger(b.jPlayer.event.seeking))},!1);a.addEventListener("seeked",function(){c.gate&&(d._seeked(),
d._trigger(b.jPlayer.event.seeked))},!1);a.addEventListener("volumechange",function(){c.gate&&(d.options.volume=a.volume,d.options.muted=a.muted,d._updateMute(),d._updateVolume(),d._trigger(b.jPlayer.event.volumechange))},!1);a.addEventListener("suspend",function(){c.gate&&(d._seeked(),d._trigger(b.jPlayer.event.suspend))},!1);a.addEventListener("ended",function(){c.gate&&(b.jPlayer.browser.webkit||(d.htmlElement.media.currentTime=0),d.htmlElement.media.pause(),d._updateButtons(!1),d._getHtmlStatus(a,
!0),d._updateInterface(),d._trigger(b.jPlayer.event.ended))},!1);a.addEventListener("error",function(){c.gate&&(d._updateButtons(!1),d._seeked(),d.status.srcSet&&(clearTimeout(d.internal.htmlDlyCmdId),d.status.waitForLoad=!0,d.status.waitForPlay=!0,d.status.video&&!d.status.nativeVideoControls&&d.internal.video.jq.css({width:"0px",height:"0px"}),d._validString(d.status.media.poster)&&!d.status.nativeVideoControls&&d.internal.poster.jq.show(),d.css.jq.videoPlay.length&&d.css.jq.videoPlay.show(),d._error({type:b.jPlayer.error.URL,
context:d.status.src,message:b.jPlayer.errorMsg.URL,hint:b.jPlayer.errorHint.URL})))},!1);b.each(b.jPlayer.htmlEvent,function(e,f){a.addEventListener(this,function(){c.gate&&d._trigger(b.jPlayer.event[f])},!1)})},_getHtmlStatus:function(a,b){var c=0,d=0,e=0,f=0;isFinite(a.duration)&&(this.status.duration=a.duration);c=a.currentTime;d=0<this.status.duration?100*c/this.status.duration:0;"object"===typeof a.seekable&&0<a.seekable.length?(e=0<this.status.duration?100*a.seekable.end(a.seekable.length-
1)/this.status.duration:100,f=0<this.status.duration?100*a.currentTime/a.seekable.end(a.seekable.length-1):0):(e=100,f=d);b&&(d=f=c=0);this.status.seekPercent=e;this.status.currentPercentRelative=f;this.status.currentPercentAbsolute=d;this.status.currentTime=c;this.status.videoWidth=a.videoWidth;this.status.videoHeight=a.videoHeight;this.status.readyState=a.readyState;this.status.networkState=a.networkState;this.status.playbackRate=a.playbackRate;this.status.ended=a.ended},_resetStatus:function(){this.status=
b.extend({},this.status,b.jPlayer.prototype.status)},_trigger:function(a,c,d){a=b.Event(a);a.jPlayer={};a.jPlayer.version=b.extend({},this.version);a.jPlayer.options=b.extend(!0,{},this.options);a.jPlayer.status=b.extend(!0,{},this.status);a.jPlayer.html=b.extend(!0,{},this.html);a.jPlayer.flash=b.extend(!0,{},this.flash);c&&(a.jPlayer.error=b.extend({},c));d&&(a.jPlayer.warning=b.extend({},d));this.element.trigger(a)},jPlayerFlashEvent:function(a,c){if(a===b.jPlayer.event.ready)if(this.internal.ready){if(this.flash.gate){if(this.status.srcSet){var d=
this.status.currentTime,e=this.status.paused;this.setMedia(this.status.media);0<d&&(e?this.pause(d):this.play(d))}this._trigger(b.jPlayer.event.flashreset)}}else this.internal.ready=!0,this.internal.flash.jq.css({width:"0px",height:"0px"}),this.version.flash=c.version,this.version.needFlash!==this.version.flash&&this._error({type:b.jPlayer.error.VERSION,context:this.version.flash,message:b.jPlayer.errorMsg.VERSION+this.version.flash,hint:b.jPlayer.errorHint.VERSION}),this._trigger(b.jPlayer.event.repeat),
this._trigger(a);if(this.flash.gate)switch(a){case b.jPlayer.event.progress:this._getFlashStatus(c);this._updateInterface();this._trigger(a);break;case b.jPlayer.event.timeupdate:this._getFlashStatus(c);this._updateInterface();this._trigger(a);break;case b.jPlayer.event.play:this._seeked();this._updateButtons(!0);this._trigger(a);break;case b.jPlayer.event.pause:this._updateButtons(!1);this._trigger(a);break;case b.jPlayer.event.ended:this._updateButtons(!1);this._trigger(a);break;case b.jPlayer.event.click:this._trigger(a);
break;case b.jPlayer.event.error:this.status.waitForLoad=!0;this.status.waitForPlay=!0;this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"});this._validString(this.status.media.poster)&&this.internal.poster.jq.show();this.css.jq.videoPlay.length&&this.status.video&&this.css.jq.videoPlay.show();this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media);this._updateButtons(!1);this._error({type:b.jPlayer.error.URL,context:c.src,message:b.jPlayer.errorMsg.URL,
hint:b.jPlayer.errorHint.URL});break;case b.jPlayer.event.seeking:this._seeking();this._trigger(a);break;case b.jPlayer.event.seeked:this._seeked();this._trigger(a);break;case b.jPlayer.event.ready:break;default:this._trigger(a)}return!1},_getFlashStatus:function(a){this.status.seekPercent=a.seekPercent;this.status.currentPercentRelative=a.currentPercentRelative;this.status.currentPercentAbsolute=a.currentPercentAbsolute;this.status.currentTime=a.currentTime;this.status.duration=a.duration;this.status.videoWidth=
a.videoWidth;this.status.videoHeight=a.videoHeight;this.status.readyState=4;this.status.networkState=0;this.status.playbackRate=1;this.status.ended=!1},_updateButtons:function(b){b!==a&&(this.status.paused=!b,this.css.jq.play.length&&this.css.jq.pause.length&&(b?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide())));this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length&&(this.status.noFullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.hide()):
this.options.fullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.show()):(this.css.jq.fullScreen.show(),this.css.jq.restoreScreen.hide()));this.css.jq.repeat.length&&this.css.jq.repeatOff.length&&(this.options.loop?(this.css.jq.repeat.hide(),this.css.jq.repeatOff.show()):(this.css.jq.repeat.show(),this.css.jq.repeatOff.hide()))},_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%");this.css.jq.playBar.length&&(this.options.smoothPlayBar?
this.css.jq.playBar.stop().animate({width:this.status.currentPercentAbsolute+"%"},250,"linear"):this.css.jq.playBar.width(this.status.currentPercentRelative+"%"));this.css.jq.currentTime.length&&this.css.jq.currentTime.text(this._convertTime(this.status.currentTime));this.css.jq.duration.length&&this.css.jq.duration.text(this._convertTime(this.status.duration))},_convertTime:c.prototype.time,_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg")},_seeked:function(){this.css.jq.seekBar.length&&
this.css.jq.seekBar.removeClass("jp-seeking-bg")},_resetGate:function(){this.html.audio.gate=!1;this.html.video.gate=!1;this.flash.gate=!1},_resetActive:function(){this.html.active=!1;this.flash.active=!1},setMedia:function(a){var c=this,d=!1,e=this.status.media.poster!==a.poster;this._resetMedia();this._resetGate();this._resetActive();b.each(this.formats,function(e,f){var m="video"===c.format[f].media;b.each(c.solutions,function(b,e){if(c[e].support[f]&&c._validString(a[f])){var n="html"===e;m?(n?
(c.html.video.gate=!0,c._html_setVideo(a),c.html.active=!0):(c.flash.gate=!0,c._flash_setVideo(a),c.flash.active=!0),c.css.jq.videoPlay.length&&c.css.jq.videoPlay.show(),c.status.video=!0):(n?(c.html.audio.gate=!0,c._html_setAudio(a),c.html.active=!0):(c.flash.gate=!0,c._flash_setAudio(a),c.flash.active=!0),c.css.jq.videoPlay.length&&c.css.jq.videoPlay.hide(),c.status.video=!1);d=!0;return!1}});if(d)return!1});if(d){if((!this.status.nativeVideoControls||!this.html.video.gate)&&this._validString(a.poster))e?
this.htmlElement.poster.src=a.poster:this.internal.poster.jq.show();this.status.srcSet=!0;this.status.media=b.extend({},a);this._updateButtons(!1);this._updateInterface()}else this._error({type:b.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:b.jPlayer.errorMsg.NO_SUPPORT,hint:b.jPlayer.errorHint.NO_SUPPORT})},_resetMedia:function(){this._resetStatus();this._updateButtons(!1);this._updateInterface();this._seeked();this.internal.poster.jq.hide();clearTimeout(this.internal.htmlDlyCmdId);
this.html.active?this._html_resetMedia():this.flash.active&&this._flash_resetMedia()},clearMedia:function(){this._resetMedia();this.html.active?this._html_clearMedia():this.flash.active&&this._flash_clearMedia();this._resetGate();this._resetActive()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},focus:function(){this.options.keyEnabled&&(b.jPlayer.focus=this)},play:function(a){a="number"===typeof a?a:NaN;this.status.srcSet?
(this.focus(),this.html.active?this._html_play(a):this.flash.active&&this._flash_play(a)):this._urlNotSetError("play")},videoPlay:function(){this.play()},pause:function(a){a="number"===typeof a?a:NaN;this.status.srcSet?this.html.active?this._html_pause(a):this.flash.active&&this._flash_pause(a):this._urlNotSetError("pause")},pauseOthers:function(){var a=this;b.each(this.instances,function(b,c){a.element!==c&&c.data("jPlayer").status.srcSet&&c.jPlayer("pause")})},stop:function(){this.status.srcSet?
this.html.active?this._html_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(a){a=this._limitValue(a,0,100);this.status.srcSet?this.html.active?this._html_playHead(a):this.flash.active&&this._flash_playHead(a):this._urlNotSetError("playHead")},_muted:function(a){this.options.muted=a;this.html.used&&this._html_mute(a);this.flash.used&&this._flash_mute(a);!this.html.video.gate&&!this.html.audio.gate&&(this._updateMute(a),this._updateVolume(this.options.volume),
this._trigger(b.jPlayer.event.volumechange))},mute:function(b){b=b===a?!0:!!b;this._muted(b)},unmute:function(b){b=b===a?!0:!!b;this._muted(!b)},_updateMute:function(b){b===a&&(b=this.options.muted);this.css.jq.mute.length&&this.css.jq.unmute.length&&(this.status.noVolume?(this.css.jq.mute.hide(),this.css.jq.unmute.hide()):b?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))},volume:function(a){a=this._limitValue(a,0,1);this.options.volume=a;this.html.used&&
this._html_volume(a);this.flash.used&&this._flash_volume(a);!this.html.video.gate&&!this.html.audio.gate&&(this._updateVolume(a),this._trigger(b.jPlayer.event.volumechange))},volumeBar:function(a){if(this.css.jq.volumeBar.length){var b=this.css.jq.volumeBar.offset(),c=a.pageX-b.left,d=this.css.jq.volumeBar.width(),a=this.css.jq.volumeBar.height()-a.pageY+b.top,b=this.css.jq.volumeBar.height();this.options.verticalVolume?this.volume(a/b):this.volume(c/d)}this.options.muted&&this._muted(!1)},volumeBarValue:function(a){this.volumeBar(a)},
_updateVolume:function(b){b===a&&(b=this.options.volume);b=this.options.muted?0:b;this.status.noVolume?(this.css.jq.volumeBar.length&&this.css.jq.volumeBar.hide(),this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.hide(),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.hide()):(this.css.jq.volumeBar.length&&this.css.jq.volumeBar.show(),this.css.jq.volumeBarValue.length&&(this.css.jq.volumeBarValue.show(),this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"](100*b+
"%")),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.show())},volumeMax:function(){this.volume(1);this.options.muted&&this._muted(!1)},_cssSelectorAncestor:function(a){var c=this;this.options.cssSelectorAncestor=a;this._removeUiClass();this.ancestorJq=a?b(a):[];a&&1!==this.ancestorJq.length&&this._warning({type:b.jPlayer.warning.CSS_SELECTOR_COUNT,context:a,message:b.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:b.jPlayer.warningHint.CSS_SELECTOR_COUNT});
this._addUiClass();b.each(this.options.cssSelector,function(a,b){c._cssSelector(a,b)})},_cssSelector:function(a,c){var d=this;"string"===typeof c?b.jPlayer.prototype.options.cssSelector[a]?(this.css.jq[a]&&this.css.jq[a].length&&this.css.jq[a].unbind(".jPlayer"),this.options.cssSelector[a]=c,this.css.cs[a]=this.options.cssSelectorAncestor+" "+c,this.css.jq[a]=c?b(this.css.cs[a]):[],this.css.jq[a].length&&this.css.jq[a].bind("click.jPlayer",function(c){c.preventDefault();d[a](c);b(this).blur()}),c&&
1!==this.css.jq[a].length&&this._warning({type:b.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[a],message:b.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[a].length+" found for "+a+" method.",hint:b.jPlayer.warningHint.CSS_SELECTOR_COUNT})):this._warning({type:b.jPlayer.warning.CSS_SELECTOR_METHOD,context:a,message:b.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:b.jPlayer.warningHint.CSS_SELECTOR_METHOD}):this._warning({type:b.jPlayer.warning.CSS_SELECTOR_STRING,context:c,message:b.jPlayer.warningMsg.CSS_SELECTOR_STRING,
hint:b.jPlayer.warningHint.CSS_SELECTOR_STRING})},seekBar:function(a){if(this.css.jq.seekBar){var b=this.css.jq.seekBar.offset(),a=a.pageX-b.left,b=this.css.jq.seekBar.width();this.playHead(100*a/b)}},playBar:function(a){this.seekBar(a)},repeat:function(){this._loop(!0)},repeatOff:function(){this._loop(!1)},_loop:function(a){this.options.loop!==a&&(this.options.loop=a,this._updateButtons(),this._trigger(b.jPlayer.event.repeat))},currentTime:function(){},duration:function(){},gui:function(){},noSolution:function(){},
option:function(c,d){var e=c;if(0===arguments.length)return b.extend(!0,{},this.options);if("string"===typeof c){var f=c.split(".");if(d===a){for(var e=b.extend(!0,{},this.options),h=0;h<f.length;h++)if(e[f[h]]!==a)e=e[f[h]];else return this._warning({type:b.jPlayer.warning.OPTION_KEY,context:c,message:b.jPlayer.warningMsg.OPTION_KEY,hint:b.jPlayer.warningHint.OPTION_KEY}),a;return e}for(var h=e={},k=0;k<f.length;k++)k<f.length-1?(h[f[k]]={},h=h[f[k]]):h[f[k]]=d}this._setOptions(e);return this},_setOptions:function(a){var c=
this;b.each(a,function(a,b){c._setOption(a,b)});return this},_setOption:function(a,c){var d=this;switch(a){case "volume":this.volume(c);break;case "muted":this._muted(c);break;case "cssSelectorAncestor":this._cssSelectorAncestor(c);break;case "cssSelector":b.each(c,function(a,b){d._cssSelector(a,b)});break;case "fullScreen":if(this.options[a]!==c){var e=b.jPlayer.nativeFeatures.fullscreen.used.webkitVideo;if(!e||e&&!this.status.waitForPlay)e||(this.options[a]=c),c?this._requestFullscreen():this._exitFullscreen(),
e||this._setOption("fullWindow",c)}break;case "fullWindow":this.options[a]!==c&&(this._removeUiClass(),this.options[a]=c,this._refreshSize());break;case "size":!this.options.fullWindow&&this.options[a].cssClass!==c.cssClass&&this._removeUiClass();this.options[a]=b.extend({},this.options[a],c);this._refreshSize();break;case "sizeFull":this.options.fullWindow&&this.options[a].cssClass!==c.cssClass&&this._removeUiClass();this.options[a]=b.extend({},this.options[a],c);this._refreshSize();break;case "autohide":this.options[a]=
b.extend({},this.options[a],c);this._updateAutohide();break;case "loop":this._loop(c);break;case "nativeVideoControls":this.options[a]=b.extend({},this.options[a],c);this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this._restrictNativeVideoControls();this._updateNativeVideoControls();break;case "noFullWindow":this.options[a]=b.extend({},this.options[a],c);this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this.status.noFullWindow=
this._uaBlocklist(this.options.noFullWindow);this._restrictNativeVideoControls();this._updateButtons();break;case "noVolume":this.options[a]=b.extend({},this.options[a],c);this.status.noVolume=this._uaBlocklist(this.options.noVolume);this._updateVolume();this._updateMute();break;case "emulateHtml":this.options[a]!==c&&((this.options[a]=c)?this._emulateHtmlBridge():this._destroyHtmlBridge());break;case "timeFormat":this.options[a]=b.extend({},this.options[a],c);break;case "keyEnabled":this.options[a]=
c;!c&&this===b.jPlayer.focus&&(b.jPlayer.focus=null);break;case "keyBindings":this.options[a]=b.extend(!0,{},this.options[a],c);break;case "audioFullScreen":this.options[a]=c}return this},_refreshSize:function(){this._setSize();this._addUiClass();this._updateSize();this._updateButtons();this._updateAutohide();this._trigger(b.jPlayer.event.resize)},_setSize:function(){this.options.fullWindow?(this.status.width=this.options.sizeFull.width,this.status.height=this.options.sizeFull.height,this.status.cssClass=
this.options.sizeFull.cssClass):(this.status.width=this.options.size.width,this.status.height=this.options.size.height,this.status.cssClass=this.options.size.cssClass);this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){this.ancestorJq.length&&this.ancestorJq.addClass(this.status.cssClass)},_removeUiClass:function(){this.ancestorJq.length&&this.ancestorJq.removeClass(this.status.cssClass)},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,
height:this.status.height});!this.status.waitForPlay&&this.html.active&&this.status.video||this.html.video.available&&this.html.used&&this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):!this.status.waitForPlay&&this.flash.active&&this.status.video&&this.internal.flash.jq.css({width:this.status.width,height:this.status.height})},_updateAutohide:function(){var a=this,b=function(){a.css.jq.gui.fadeIn(a.options.autohide.fadeIn,function(){clearTimeout(a.internal.autohideId);
a.internal.autohideId=setTimeout(function(){a.css.jq.gui.fadeOut(a.options.autohide.fadeOut)},a.options.autohide.hold)})};this.css.jq.gui.length&&(this.css.jq.gui.stop(!0,!0),clearTimeout(this.internal.autohideId),this.element.unbind(".jPlayerAutohide"),this.css.jq.gui.unbind(".jPlayerAutohide"),this.status.nativeVideoControls?this.css.jq.gui.hide():this.options.fullWindow&&this.options.autohide.full||!this.options.fullWindow&&this.options.autohide.restored?(this.element.bind("mousemove.jPlayer.jPlayerAutohide",
b),this.css.jq.gui.bind("mousemove.jPlayer.jPlayerAutohide",b),this.css.jq.gui.hide()):this.css.jq.gui.show())},fullScreen:function(){this._setOption("fullScreen",!0)},restoreScreen:function(){this._setOption("fullScreen",!1)},_fullscreenAddEventListeners:function(){var a=this,c=b.jPlayer.nativeFeatures.fullscreen;c.api.fullscreenEnabled&&c.event.fullscreenchange&&("function"!==typeof this.internal.fullscreenchangeHandler&&(this.internal.fullscreenchangeHandler=function(){a._fullscreenchange()}),
document.addEventListener(c.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1))},_fullscreenRemoveEventListeners:function(){var a=b.jPlayer.nativeFeatures.fullscreen;this.internal.fullscreenchangeHandler&&document.addEventListener(a.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1)},_fullscreenchange:function(){this.options.fullScreen&&!b.jPlayer.nativeFeatures.fullscreen.api.fullscreenElement()&&this._setOption("fullScreen",!1)},_requestFullscreen:function(){var a=this.ancestorJq.length?
this.ancestorJq[0]:this.element[0],c=b.jPlayer.nativeFeatures.fullscreen;c.used.webkitVideo&&(a=this.htmlElement.video);c.api.fullscreenEnabled&&c.api.requestFullscreen(a)},_exitFullscreen:function(){var a=b.jPlayer.nativeFeatures.fullscreen,c;a.used.webkitVideo&&(c=this.htmlElement.video);a.api.fullscreenEnabled&&a.api.exitFullscreen(c)},_html_initMedia:function(a){var c=b(this.htmlElement.media).empty();b.each(a.track||[],function(a,b){var d=document.createElement("track");d.setAttribute("kind",
b.kind?b.kind:"");d.setAttribute("src",b.src?b.src:"");d.setAttribute("srclang",b.srclang?b.srclang:"");d.setAttribute("label",b.label?b.label:"");b.def&&d.setAttribute("default",b.def);c.append(d)});this.htmlElement.media.src=this.status.src;"none"!==this.options.preload&&this._html_load();this._trigger(b.jPlayer.event.timeupdate)},_html_setFormat:function(a){var c=this;b.each(this.formats,function(b,d){if(c.html.support[d]&&a[d])return c.status.src=a[d],c.status.format[d]=!0,c.status.formatType=
d,!1})},_html_setAudio:function(a){this._html_setFormat(a);this.htmlElement.media=this.htmlElement.audio;this._html_initMedia(a)},_html_setVideo:function(a){this._html_setFormat(a);this.status.nativeVideoControls&&(this.htmlElement.video.poster=this._validString(a.poster)?a.poster:"");this.htmlElement.media=this.htmlElement.video;this._html_initMedia(a)},_html_resetMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id===this.internal.video.id&&!this.status.nativeVideoControls&&this.internal.video.jq.css({width:"0px",
height:"0px"}),this.htmlElement.media.pause())},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.src="about:blank",this.htmlElement.media.load())},_html_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.htmlElement.media.load());clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(a){var b=this,c=this.htmlElement.media;this._html_load();if(isNaN(a))c.play();else{this.internal.cmdsIgnored&&c.play();try{if(!c.seekable||"object"===typeof c.seekable&&
0<c.seekable.length)c.currentTime=a,c.play();else throw 1;}catch(d){this.internal.htmlDlyCmdId=setTimeout(function(){b.play(a)},250);return}}this._html_checkWaitForPlay()},_html_pause:function(a){var b=this,c=this.htmlElement.media;0<a?this._html_load():clearTimeout(this.internal.htmlDlyCmdId);c.pause();if(!isNaN(a))try{if(!c.seekable||"object"===typeof c.seekable&&0<c.seekable.length)c.currentTime=a;else throw 1;}catch(d){this.internal.htmlDlyCmdId=setTimeout(function(){b.pause(a)},250);return}0<
a&&this._html_checkWaitForPlay()},_html_playHead:function(a){var b=this,c=this.htmlElement.media;this._html_load();try{if("object"===typeof c.seekable&&0<c.seekable.length)c.currentTime=a*c.seekable.end(c.seekable.length-1)/100;else if(0<c.duration&&!isNaN(c.duration))c.currentTime=a*c.duration/100;else throw"e";}catch(d){this.internal.htmlDlyCmdId=setTimeout(function(){b.playHead(a)},250);return}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){this.status.waitForPlay&&
(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))},_html_volume:function(a){this.html.audio.available&&(this.htmlElement.audio.volume=a);this.html.video.available&&(this.htmlElement.video.volume=a)},_html_mute:function(a){this.html.audio.available&&(this.htmlElement.audio.muted=a);this.html.video.available&&(this.htmlElement.video.muted=
a)},_flash_setAudio:function(a){var c=this;try{b.each(this.formats,function(b,d){if(c.flash.support[d]&&a[d]){switch(d){case "m4a":case "fla":c._getMovie().fl_setAudio_m4a(a[d]);break;case "mp3":c._getMovie().fl_setAudio_mp3(a[d]);break;case "rtmpa":c._getMovie().fl_setAudio_rtmp(a[d])}c.status.src=a[d];c.status.format[d]=!0;c.status.formatType=d;return!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(d){this._flashError(d)}},_flash_setVideo:function(a){var c=
this;try{b.each(this.formats,function(b,d){if(c.flash.support[d]&&a[d]){switch(d){case "m4v":case "flv":c._getMovie().fl_setVideo_m4v(a[d]);break;case "rtmpv":c._getMovie().fl_setVideo_rtmp(a[d])}c.status.src=a[d];c.status.format[d]=!0;c.status.formatType=d;return!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(d){this._flashError(d)}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"});this._flash_pause(NaN)},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia()}catch(a){this._flashError(a)}},
_flash_load:function(){try{this._getMovie().fl_load()}catch(a){this._flashError(a)}this.status.waitForLoad=!1},_flash_play:function(a){try{this._getMovie().fl_play(a)}catch(b){this._flashError(b)}this.status.waitForLoad=!1;this._flash_checkWaitForPlay()},_flash_pause:function(a){try{this._getMovie().fl_pause(a)}catch(b){this._flashError(b)}0<a&&(this.status.waitForLoad=!1,this._flash_checkWaitForPlay())},_flash_playHead:function(a){try{this._getMovie().fl_play_head(a)}catch(b){this._flashError(b)}this.status.waitForLoad||
this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))},_flash_volume:function(a){try{this._getMovie().fl_volume(a)}catch(b){this._flashError(b)}},_flash_mute:function(a){try{this._getMovie().fl_mute(a)}catch(b){this._flashError(b)}},_getMovie:function(){return document[this.internal.flash.id]},
_getFlashPluginVersion:function(){var a=0,b;if(window.ActiveXObject)try{if(b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){var c=b.GetVariable("$version");c&&(c=c.split(" ")[1].split(","),a=parseInt(c[0],10)+"."+parseInt(c[1],10))}}catch(d){}else navigator.plugins&&0<navigator.mimeTypes.length&&navigator.plugins["Shockwave Flash"]&&(a=navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1"));return 1*a},_checkForFlash:function(a){var b=!1;this._getFlashPluginVersion()>=
a&&(b=!0);return b},_validString:function(a){return a&&"string"===typeof a},_limitValue:function(a,b,c){return a<b?b:a>c?c:a},_urlNotSetError:function(a){this._error({type:b.jPlayer.error.URL_NOT_SET,context:a,message:b.jPlayer.errorMsg.URL_NOT_SET,hint:b.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(a){var c;c=this.internal.ready?"FLASH_DISABLED":"FLASH";this._error({type:b.jPlayer.error[c],context:this.internal.flash.swf,message:b.jPlayer.errorMsg[c]+a.message,hint:b.jPlayer.errorHint[c]});
this.internal.flash.jq.css({width:"1px",height:"1px"})},_error:function(a){this._trigger(b.jPlayer.event.error,a);this.options.errorAlerts&&this._alert("Error!"+(a.message?"\n\n"+a.message:"")+(a.hint?"\n\n"+a.hint:"")+"\n\nContext: "+a.context)},_warning:function(c){this._trigger(b.jPlayer.event.warning,a,c);this.options.warningAlerts&&this._alert("Warning!"+(c.message?"\n\n"+c.message:"")+(c.hint?"\n\n"+c.hint:"")+"\n\nContext: "+c.context)},_alert:function(a){alert("jPlayer "+this.version.script+
" : id='"+this.internal.self.id+"' : "+a)},_emulateHtmlBridge:function(){var a=this;b.each(b.jPlayer.emulateMethods.split(/\s+/g),function(b,c){a.internal.domNode[c]=function(b){a[c](b)}});b.each(b.jPlayer.event,function(c,d){var e=!0;b.each(b.jPlayer.reservedEvent.split(/\s+/g),function(a,b){if(b===c)return e=!1});e&&a.element.bind(d+".jPlayer.jPlayerHtml",function(){a._emulateHtmlUpdate();var b=document.createEvent("Event");b.initEvent(c,!1,!0);a.internal.domNode.dispatchEvent(b)})})},_emulateHtmlUpdate:function(){var a=
this;b.each(b.jPlayer.emulateStatus.split(/\s+/g),function(b,c){a.internal.domNode[c]=a.status[c]});b.each(b.jPlayer.emulateOptions.split(/\s+/g),function(b,c){a.internal.domNode[c]=a.options[c]})},_destroyHtmlBridge:function(){var a=this;this.element.unbind(".jPlayerHtml");b.each((b.jPlayer.emulateMethods+" "+b.jPlayer.emulateStatus+" "+b.jPlayer.emulateOptions).split(/\s+/g),function(b,c){delete a.internal.domNode[c]})}};b.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",
NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"};b.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",
URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+b.jPlayer.prototype.version.script+" needs Jplayer.swf version "+b.jPlayer.prototype.version.needFlash+" but found "};b.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",
URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."};b.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"};b.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",
OPTION_KEY:"The option requested in jPlayer('option') is undefined."};b.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}});(function(b){var a=/[\-\[\]{}()*+?.,\\\^$|#\s]/g;b.widget("ech.multiselectfilter",{options:{label:"Filter:",width:null,placeholder:"Enter keywords",autoReset:!1},_create:function(){var a=this,d=this.options,e=this.instance=b(this.element).data("multiselect");this.header=e.menu.find(".ui-multiselect-header").addClass("ui-multiselect-hasfilter");d=this.wrapper=b('<div class="ui-multiselect-filter">'+(d.label.length?d.label:"")+'<input placeholder="'+d.placeholder+'" type="search"'+(/\d/.test(d.width)?
'style="width:'+d.width+'px"':"")+" /></div>").prependTo(this.header);this.inputs=e.menu.find('input[type="checkbox"], input[type="radio"]');this.input=d.find("input").bind({keydown:function(a){13===a.which&&a.preventDefault()},keyup:b.proxy(a._handler,a),click:b.proxy(a._handler,a)});this.updateCache();e._toggleChecked=function(d,e){var i=e&&e.length?e:this.labels.find("input"),j=this,i=i.not(a.instance._isOpen?":disabled, :hidden":":disabled").each(this._toggleState("checked",d));this.update();
var m=i.map(function(){return this.value}).get();this.element.find("option").filter(function(){!this.disabled&&-1<b.inArray(this.value,m)&&j._toggleState("selected",d).call(this)})};e=b(document).bind("multiselectrefresh",function(){a.updateCache();a._handler()});this.options.autoReset&&e.bind("multiselectclose",b.proxy(this._reset,this))},_handler:function(c){var d=b.trim(this.input[0].value.toLowerCase()),e=this.rows,f=this.inputs,g=this.cache;if(d){e.hide();var i=RegExp(d.replace(a,"\\$&"),"gi");
this._trigger("filter",c,b.map(g,function(a,b){return-1!==a.search(i)?(e.eq(b).show(),f.get(b)):null}))}else e.show();this.instance.menu.find(".ui-multiselect-optgroup-label").each(function(){var a=b(this),c=a.nextUntil(".ui-multiselect-optgroup-label").filter(function(){return"none"!==b.css(this,"display")}).length;a[c?"show":"hide"]()})},_reset:function(){this.input.val("").trigger("keyup")},updateCache:function(){this.rows=this.instance.menu.find(".ui-multiselect-checkboxes li:not(.ui-multiselect-optgroup-label)");
this.cache=this.element.children().map(function(){var a=b(this);"optgroup"===this.tagName.toLowerCase()&&(a=a.children());return a.map(function(){return this.innerHTML.toLowerCase()}).get()}).get()},widget:function(){return this.wrapper},destroy:function(){b.Widget.prototype.destroy.call(this);this.input.val("").trigger("keyup");this.wrapper.remove()}})})(jQuery);(function(b){var a=0;b.widget("ech.multiselect",{options:{header:!0,height:175,minWidth:225,classes:"",checkAllText:"Check all",uncheckAllText:"Uncheck all",noneSelectedText:"Select options",selectedText:"# selected",selectedList:0,show:null,hide:null,autoOpen:!1,multiple:!0,position:{}},_create:function(){var a=this.element.hide(),d=this.options;this.speed=b.fx.speeds._default;this._isOpen=!1;a=(this.button=b('<button type="button"><span class="ui-icon ui-icon-triangle-2-n-s"></span></button>')).addClass("ui-multiselect ui-widget ui-state-default ui-corner-all").addClass(d.classes).attr({title:a.attr("title"),
"aria-haspopup":!0,tabIndex:a.attr("tabIndex")}).insertAfter(a);(this.buttonlabel=b("<span />")).html(d.noneSelectedText).appendTo(a);var a=(this.menu=b("<div />")).addClass("ui-multiselect-menu ui-widget ui-widget-content ui-corner-all").addClass(d.classes).appendTo(document.body),e=(this.header=b("<div />")).addClass("ui-widget-header ui-corner-all ui-multiselect-header ui-helper-clearfix").appendTo(a);(this.headerLinkContainer=b("<ul />")).addClass("ui-helper-reset").html(function(){return!0===
d.header?'<li><a class="ui-multiselect-all" href="#"><span class="ui-icon ui-icon-check"></span><span>'+d.checkAllText+'</span></a></li><li><a class="ui-multiselect-none" href="#"><span class="ui-icon ui-icon-closethick"></span><span>'+d.uncheckAllText+"</span></a></li>":"string"===typeof d.header?"<li>"+d.header+"</li>":""}).append('<li class="ui-multiselect-close"><a href="#" class="ui-multiselect-close"><span class="ui-icon ui-icon-circle-close"></span></a></li>').appendTo(e);(this.checkboxContainer=
b("<ul />")).addClass("ui-multiselect-checkboxes ui-helper-reset").appendTo(a);this._bindEvents();this.refresh(!0);d.multiple||a.addClass("ui-multiselect-single");var f=this;this.element.on("postmanualchange",function(){f.refresh(!0)});this.element.data("target-for-change",this.element.next("button"))},_init:function(){!1===this.options.header&&this.header.hide();this.options.multiple||this.headerLinkContainer.find(".ui-multiselect-all, .ui-multiselect-none").hide();this.options.autoOpen&&this.open();
this.element.is(":disabled")&&this.disable();this.options.position=b.extend({},this.options.position)},refresh:function(c){var d=this.element,e=this.options,f=this.menu,g=this.checkboxContainer,i=[],j="",m=d.attr("id")||a++;d.find("option").each(function(a){b(this);var c=this.parentNode,d=this.innerHTML,f=this.title,g=this.value,a="ui-multiselect-"+(this.id||m+"-option-"+a),n=this.disabled,y=this.selected,t=["ui-corner-all"],w=(n?"ui-multiselect-disabled ":" ")+this.className,r;"OPTGROUP"===c.tagName&&
(r=c.getAttribute("label"),-1===b.inArray(r,i)&&(j+='<li class="ui-multiselect-optgroup-label '+c.className+'"><a href="#">'+r+"</a></li>",i.push(r)));n&&t.push("ui-state-disabled");y&&!e.multiple&&t.push("ui-state-active");j+='<li class="'+w+'">';j+='<label for="'+a+'" title="'+f+'" class="'+t.join(" ")+'">';j+='<input id="'+a+'" name="multiselect_'+m+'" type="'+(e.multiple?"checkbox":"radio")+'" value="'+g+'" title="'+d+'"';y&&(j+=' checked="checked"',j+=' aria-selected="true"');n&&(j+=' disabled="disabled"',
j+=' aria-disabled="true"');j+=" /><span>"+d+"</span></label></li>"});g.html(j);this.labels=f.find("label");this.inputs=this.labels.children("input");this._setButtonWidth();this._setMenuWidth();this.button[0].defaultValue=this.update();c||this._trigger("refresh")},update:function(){var a=this.options,d=this.inputs,e=d.filter(":checked"),f=e.length,a=0===f?a.noneSelectedText:b.isFunction(a.selectedText)?a.selectedText.call(this,f,d.length,e.get()):/\d/.test(a.selectedList)&&0<a.selectedList&&f<=a.selectedList?
e.map(function(){return b(this).next().html()}).get().join(", "):a.selectedText.replace("#",f).replace("#",d.length);this.buttonlabel.html(a);return a},_bindEvents:function(){function a(){d[d._isOpen?"close":"open"]();return!1}var d=this,e=this.button;e.find("span").bind("click.multiselect",a);e.bind({click:a,keypress:function(a){switch(a.which){case 27:case 38:case 37:d.close();break;case 39:case 40:d.open()}},mouseenter:function(){e.hasClass("ui-state-disabled")||b(this).addClass("ui-state-hover")},
mouseleave:function(){b(this).removeClass("ui-state-hover")},focus:function(){e.hasClass("ui-state-disabled")||b(this).addClass("ui-state-focus")},blur:function(){b(this).removeClass("ui-state-focus")}});this.header.delegate("a","click.multiselect",function(a){if(b(this).hasClass("ui-multiselect-close"))d.close();else d[b(this).hasClass("ui-multiselect-all")?"checkAll":"uncheckAll"]();a.preventDefault()});this.menu.delegate("li.ui-multiselect-optgroup-label a","click.multiselect",function(a){a.preventDefault();
var c=b(this),e=c.parent().nextUntil("li.ui-multiselect-optgroup-label").find("input:visible:not(:disabled)"),j=e.get(),c=c.parent().text();!1!==d._trigger("beforeoptgrouptoggle",a,{inputs:j,label:c})&&(d._toggleChecked(e.filter(":checked").length!==e.length,e),d._trigger("optgrouptoggle",a,{inputs:j,label:c,checked:j[0].checked}))}).delegate("label","mouseenter.multiselect",function(){b(this).hasClass("ui-state-disabled")||(d.labels.removeClass("ui-state-hover"),b(this).addClass("ui-state-hover").find("input").focus())}).delegate("label",
"keydown.multiselect",function(a){a.preventDefault();switch(a.which){case 9:case 27:d.close();break;case 38:case 40:case 37:case 39:d._traverse(a.which,this);break;case 13:b(this).find("input")[0].click()}}).delegate('input[type="checkbox"], input[type="radio"]',"click.multiselect",function(a){var c=b(this),e=this.value,j=this.checked,m=d.element.find("option");this.disabled||!1===d._trigger("click",a,{value:e,text:this.title,checked:j})?a.preventDefault():(c.focus(),c.attr("aria-selected",j),m.each(function(){this.value===
e?this.selected=j:d.options.multiple||(this.selected=!1)}),d.options.multiple||(d.labels.removeClass("ui-state-active"),c.closest("label").toggleClass("ui-state-active",j),d.close()),d.element.trigger("change"),setTimeout(b.proxy(d.update,d),10))});b(document).bind("mousedown.multiselect",function(a){d._isOpen&&(!b.contains(d.menu[0],a.target)&&!b.contains(d.button[0],a.target)&&a.target!==d.button[0])&&d.close()});b(this.element[0].form).bind("reset.multiselect",function(){setTimeout(b.proxy(d.refresh,
d),10)})},_setButtonWidth:function(){var a=this.element.outerWidth(),b=this.options;/\d/.test(b.minWidth)&&a<b.minWidth&&(a=b.minWidth);a>this.element.parent().outerWidth()&&(a=parseInt(this.element.parent().width()));this.button.outerWidth(a)},_setMenuWidth:function(){var a=this.menu,b=this.button.outerWidth();350>b&&(b=350);a.outerWidth(b)},_traverse:function(a,d){var e=b(d),f=38===a||37===a,e=e.parent()[f?"prevAll":"nextAll"]("li:not(.ui-multiselect-disabled, .ui-multiselect-optgroup-label)")[f?
"last":"first"]();e.length?e.find("label").trigger("mouseover"):(e=this.menu.find("ul").last(),this.menu.find("label")[f?"last":"first"]().trigger("mouseover"),e.scrollTop(f?e.height():0))},_toggleState:function(a,b){return function(){this.disabled||(this[a]=b);b?this.setAttribute("aria-selected",!0):this.removeAttribute("aria-selected")}},_toggleChecked:function(a,d){var e=d&&d.length?d:this.inputs,f=this;e.each(this._toggleState("checked",a));e.eq(0).focus();this.update();var g=e.map(function(){return this.value}).get();
this.element.find("option").each(function(){!this.disabled&&-1<b.inArray(this.value,g)&&f._toggleState("selected",a).call(this)});e.length&&this.element.trigger("change")},_toggleDisabled:function(a){this.button.attr({disabled:a,"aria-disabled":a})[a?"addClass":"removeClass"]("ui-state-disabled");var d=this.menu.find("input"),d=a?d.filter(":enabled").data("ech-multiselect-disabled",!0):d.filter(function(){return!0===b.data(this,"ech-multiselect-disabled")}).removeData("ech-multiselect-disabled");
d.attr({disabled:a,"arial-disabled":a}).parent()[a?"addClass":"removeClass"]("ui-state-disabled");this.element.attr({disabled:a,"aria-disabled":a})},open:function(){var a=this.button,d=this.menu,e=this.speed,f=this.options,g=[];if(!(!1===this._trigger("beforeopen")||a.hasClass("ui-state-disabled")||this._isOpen)){var i=d.find("ul").last(),j=f.show,m=a.offset();b.isArray(f.show)&&(j=f.show[0],e=f.show[1]||this.speed);j&&(g=[j,e]);i.scrollTop(0).height(f.height);b.ui.position&&!b.isEmptyObject(f.position)?
(f.position.of=f.position.of||a,d.show().position(f.position).hide()):d.css({top:m.top+a.outerHeight(),left:m.left});b.fn.show.apply(d,g);this.labels.eq(0).trigger("mouseover").trigger("mouseenter").find("input").trigger("focus");a.addClass("ui-state-active");this._isOpen=!0;this._trigger("open")}},close:function(){if(!1!==this._trigger("beforeclose")){var a=this.options,d=a.hide,e=this.speed,f=[];b.isArray(a.hide)&&(d=a.hide[0],e=a.hide[1]||this.speed);d&&(f=[d,e]);b.fn.hide.apply(this.menu,f);this.button.removeClass("ui-state-active").trigger("blur").trigger("mouseleave");
this._isOpen=!1;this._trigger("close")}},enable:function(){this._toggleDisabled(!1)},disable:function(){this._toggleDisabled(!0)},checkAll:function(){this._toggleChecked(!0);this._trigger("checkAll")},uncheckAll:function(){this._toggleChecked(!1);this._trigger("uncheckAll")},getChecked:function(){return this.menu.find("input").filter(":checked")},destroy:function(){b.Widget.prototype.destroy.call(this);this.button.remove();this.menu.remove();this.element.show();return this},isOpen:function(){return this._isOpen},
widget:function(){return this.menu},getButton:function(){return this.button},_setOption:function(a,d){var e=this.menu;switch(a){case "header":e.find("div.ui-multiselect-header")[d?"show":"hide"]();break;case "checkAllText":e.find("a.ui-multiselect-all span").eq(-1).text(d);break;case "uncheckAllText":e.find("a.ui-multiselect-none span").eq(-1).text(d);break;case "height":e.find("ul").last().height(parseInt(d,10));break;case "minWidth":this.options[a]=parseInt(d,10);this._setButtonWidth();this._setMenuWidth();
break;case "selectedText":case "selectedList":case "noneSelectedText":this.options[a]=d;this.update();break;case "classes":e.add(this.button).removeClass(this.options.classes).addClass(d);break;case "multiple":e.toggleClass("ui-multiselect-single",!d),this.options.multiple=d,this.element[0].multiple=d,this.refresh()}b.Widget.prototype._setOption.apply(this,arguments)}})})(jQuery);$.widget("ui.form",{_init:function(){var b=this,a=this.element.find("input, select, textarea");$.each(a,function(){$(this).addClass("ui-widget ui-state-default ui-corner-all");$(this).is(":checkbox")?b.checkboxes(this):$(this).is('input[type="text"]')||$(this).is("textarea")||$(this).is('input[type="password"]')?b.textelements(this):$(this).is(":radio")&&b.radios(this);$(this).is(":disabled")&&$(this).addClass("fieldDisabled");$(this).hasClass("date")&&$(this).datepicker()})},textelements:function(b){$(b).on("focusin",
function(){$(this).addClass("ui-state-focus")}).on("focusout",function(){$(this).removeClass("ui-state-focus")})},checkboxes:function(b){var a=$("<span />"),c=$(b);c.after(a);c.addClass("ui-helper-hidden");a.css({width:15,height:15,display:"block"});a.wrap('<span class="ui-state-default ui-corner-all selectable" />');c.is(":checked")&&(a.parent("span").addClass("ui-state-active"),a.addClass("ui-icon ui-icon-check"));a.parent().on("click",function(b,e){a.toggleClass("ui-icon ui-icon-check");a.hasClass("ui-icon")?
c.prop("checked",true):c.prop("checked",false);e||c.trigger("change")});c.on("toggleValue",function(){a.parent().trigger("click",true)});c.on("forceValue",function(b,c){c!=null&&c!=$(this).prop("checked")&&a.parent().trigger("click",true)})},radios:function(b){var a=$("<span />"),c=$(b);c.after(a);c.addClass("ui-helper-hidden");a.css({width:15,height:15,display:"block"});a.wrap('<span rel="'+c.attr("id")+'" class="ui-state-default ui-corner-all ui-state-active selectable" style="float: left" />');
c.is(":checked")&&a.addClass("ui-icon ui-icon-bullet");a.parent().on("click",function(){a.parents("ul").find(".ui-icon-bullet").removeClass("ui-icon ui-icon-check");a.addClass("ui-icon ui-icon-bullet");c.prop("checked",!0);c.trigger("change")})}});/*
 jQuery UI Spinner 1.20

 Copyright (c) 2009-2010 Brant Burnett
 Dual licensed under the MIT or GPL Version 2 licenses.
*/
(function(b){document.createElement("input").setAttribute("type","number");var a="ui-state-active",c=b.ui.keyCode,d=c.UP,e=c.DOWN,f=c.RIGHT,g=c.LEFT,i=c.PAGE_UP,j=c.PAGE_DOWN,m=c.HOME,h=c.END,k=b.browser.msie,l=b.browser.mozilla?"DOMMouseScroll":"mousewheel",o=[d,e,f,g,i,j,m,h,c.BACKSPACE,c.DELETE,c.TAB],p;b.widget("ui.spinner",{options:{min:null,max:null,allowNull:!0,group:"",point:".",prefix:"",suffix:"",places:null,defaultStep:1,largeStep:10,mouseWheel:!0,increment:"slow",className:null,showOn:"always",
width:16,upIconClass:"ui-icon-triangle-1-n",downIconClass:"ui-icon-triangle-1-s",format:function(a,b){for(var c=/(\d+)(\d{3})/,d=(isNaN(a)?0:Math.abs(a)).toFixed(b)+"",d=d.replace(".",this.point);c.test(d)&&this.group;d=d.replace(c,"$1"+this.group+"$2"));return(0>a?"-":"")+this.prefix+d+this.suffix},parse:function(a){"."==this.group&&(a=a.replace(".",""));"."!=this.point&&(a=a.replace(this.point,"."));return parseFloat(a.replace(/[^0-9\-\.]/g,""))}},_create:function(){var a=this.element,b=a.attr("type");
!a.is("input")||"text"!=b&&"number"!=b?console.error("Invalid target for ui.spinner"):(this._procOptions(!0),this._createButtons(a),a.is(":enabled")||this.disable())},_createButtons:function(n){function l(a){for(var b=0;b<o.length;b++)if(o[b]==a)return!0;return!1}function t(a){if(z){if(a===I)return;clearTimeout(z)}I=a;z=setTimeout(function(){z=0;a()},100)}function w(){E&&(b(this).removeClass(a),q._stopSpin(),E=!1);return!1}if(0==n.filter(":visible").length){var r=this.element.clone().attr("id",!1).css({visibility:"hidden",
display:"block",position:"absolute"});b("body").append(r);var x=r.outerHeight();r.width();r.remove()}var q=this,u=q.options,r=u.className,A=u.width,v=u.showOn,F=b.support.boxModel,J=0<n.filter(":visible").length?n.outerHeight():x,K=q.oMargin=function(a){return"auto"==a?0:parseInt(a)}(n.css("margin-right")),G=q.wrapper=n.css({width:(q.oWidth=F?n.width():n.outerWidth())-A,marginRight:K+A,textAlign:"right"}).after('<span class="ui-spinner ui-widget"></span>').next(),x=q.btnContainer=b('<div class="ui-spinner-buttons"><div class="ui-spinner-up ui-spinner-button ui-state-default ui-corner-tr"><span class="ui-icon '+
u.upIconClass+'">&nbsp;</span></div><div class="ui-spinner-down ui-spinner-button ui-state-default ui-corner-br"><span class="ui-icon '+u.downIconClass+'">&nbsp;</span></div></div>'),B,L,s,z,I,C,D,H,E,M="rtl"==n[0].dir;r&&G.addClass(r);G.append(x.css({height:J,left:-A-K,top:n.offset().top-G.offset().top+"px"}));s=q.buttons=x.find(".ui-spinner-button");s.css({width:A-(F?s.outerWidth()-s.width():0),height:J/2-(F?s.outerHeight()-s.height():0)});B=s[0];L=s[1];r=s.find(".ui-icon");r.css({marginLeft:(s.innerWidth()-
r.width())/2,marginTop:(s.innerHeight()-r.height())/2});x.width(s.outerWidth());"always"!=v&&x.css("opacity",0);("hover"==v||"both"==v)&&s.add(n).bind("mouseenter.uispinner",function(){t(function(){C=!0;(!q.focused||"hover"==v)&&q.showButtons()})}).bind("mouseleave.uispinner",function(){t(function(){C=!1;(!q.focused||"hover"==v)&&q.hideButtons()})});s.hover(function(){q.buttons.removeClass("ui-state-hover");u.disabled||b(this).addClass("ui-state-hover")},function(){b(this).removeClass("ui-state-hover")}).mousedown(function(){if(!u.disabled){var c=
q.element[0],d=this===B?1:-1;c.focus();c.select();b(this).addClass(a);E=!0;q._startSpin(d)}return!1}).mouseup(w).mouseout(w);k&&s.dblclick(function(){u.disabled||(q._change(),q._doSpin((this===B?1:-1)*u.step));return!1}).bind("selectstart",function(){return!1});n.bind("keydown.uispinner",function(c){var n,k,t=c.keyCode;if(c.ctrl||c.alt)return!0;l(t)&&(H=!0);if(D)return!1;switch(t){case d:case i:n=1;k=t==i;break;case e:case j:n=-1;k=t==j;break;case f:case g:n=t==f^M?1:-1;break;case m:return c=q.options.min,
null!=c&&q._setValue(c),!1;case h:return c=q.options.max,null!=c&&q._setValue(c),!1}if(n)return!D&&!u.disabled&&(keyDir=n,b(0<n?B:L).addClass(a),D=!0,q._startSpin(n,k)),!1}).bind("keyup.uispinner",function(b){if(b.ctrl||b.alt)return!0;l(c)&&(H=!1);switch(b.keyCode){case d:case f:case i:case e:case g:case j:return s.removeClass(a),q._stopSpin(),D=!1}}).bind("keypress.uispinner",function(a){q._change();if(H)a=!1;else var a=String.fromCharCode(a.charCode||a.keyCode),b=q.options,a="0"<=a&&"9">=a||"-"==
a||0<q.places&&a==b.point||a==b.group?!1:!0;if(a)return!1}).bind("change.uispinner",function(){q._change()}).bind("focusin.uispinner",function(){function a(){q.element.select()}k?a():setTimeout(a,0);q.focused=!0;p=q;!C&&("focus"==v||"both"==v)&&q.showButtons()}).bind("focusout.uispinner",function(){q.focused=!1;!C&&("focus"==v||"both"==v)&&q.hideButtons()})},_procOptions:function(a){var b=this.element,c=this.options,d=c.min,e=c.max,f=c.step,g=c.places,i=-1,h;"slow"==c.increment?c.increment=[{count:1,
mult:1,delay:250},{count:3,mult:1,delay:100},{count:0,mult:1,delay:50}]:"fast"==c.increment&&(c.increment=[{count:1,mult:1,delay:250},{count:19,mult:1,delay:100},{count:80,mult:1,delay:20},{count:100,mult:10,delay:20},{count:0,mult:100,delay:20}]);""===e&&(e=null);""===d&&(d=null);if(null==d&&null!=(h=b.attr("min")))d=parseFloat(h);if(null==e&&null!=(h=b.attr("max")))e=parseFloat(h);if(!f&&null!=(h=b.attr("step"))&&"any"!=h)f=parseFloat(h),c.largeStep*=f;c.step=f=f||c.defaultStep;if(null==g&&-1!=
(h=f+"").indexOf("."))g=h.length-h.indexOf(".")-1;this.places=g;null!=e&&null!=d&&(d>e&&(d=e),i=Math.max(Math.max(i,c.format(e,g,b).length),c.format(d,g,b).length));a&&(this.inputMaxLength=b[0].maxLength);h=this.inputMaxLength;if(0<h){i=0<i?Math.min(h,i):h;h=Math.pow(10,i)-1;if(null==e||e>h)e=h;h=-(h+1)/10+1;if(null==d||d<h)d=h}0<i&&b.attr("maxlength",i);c.min=d;c.max=e;this._change();b.unbind(l+".uispinner");c.mouseWheel&&b.bind(l+".uispinner",this._mouseWheel)},_mouseWheel:function(a){var c=b.data(this,
"spinner");if(!c.options.disabled&&c.focused&&p===c)return a.originalEvent&&(a=a.originalEvent),c._change(),c._doSpin((0<(a.wheelDelta||-a.detail)?1:-1)*c.options.step),!1},_setTimer:function(a,b,c){var d=this;d._stopSpin();d.timer=setInterval(function(){d._spin(b,c)},a)},_stopSpin:function(){this.timer&&(clearInterval(this.timer),this.timer=0)},_startSpin:function(a,b){var c=this.options.increment;this._change();this._doSpin(a*(b?this.options.largeStep:this.options.step));c&&0<c.length&&(this.incCounter=
this.counter=0,this._setTimer(c[0].delay,a,b))},_spin:function(a,b){var c=this.options.increment,d=c[this.incCounter];this._doSpin(a*d.mult*(b?this.options.largeStep:this.options.step));this.counter++;this.counter>d.count&&this.incCounter<c.length-1&&(this.counter=0,d=c[++this.incCounter],this._setTimer(d.delay,a,b))},_doSpin:function(a){var b=this.curvalue;null==b&&(b=-Infinity===this.options.min?0:(0<a?this.options.min:this.options.max)||0);this._setValue(b+a)},_parseValue:function(){var a=this.element.val();
return a?this.options.parse(a,this.element):null},_validate:function(a){var b=this.options,c=b.min,d=b.max;null==a&&!b.allowNull&&(a=null!=this.curvalue?this.curvalue:c||d||0);return null!=d&&a>d?d:null!=c&&a<c?c:a},_change:function(){var a=this._parseValue();this.selfChange||(isNaN(a)&&(a=this.curvalue),this._setValue(a,!0))},_setOption:function(a,c){b.Widget.prototype._setOption.call(this,a,c);this._procOptions()},increment:function(){this._doSpin(this.options.step)},decrement:function(){this._doSpin(-this.options.step)},
showButtons:function(a){var b=this.btnContainer.stop();a?b.css("opacity",1):b.fadeTo("fast",1)},hideButtons:function(a){var b=this.btnContainer.stop();a?b.css("opacity",0):b.fadeTo("fast",0);this.buttons.removeClass("ui-state-hover")},_setValue:function(a,b){this.curvalue=a=this._validate(a);this.element.val(null!=a?this.options.format(a,this.places,this.element):"");b||(this.selfChange=!0,this.element.change(),this.selfChange=!1)},value:function(a){return arguments.length?(this._setValue(a),this.element):
this.curvalue},enable:function(){this.buttons.removeClass("ui-state-disabled");this.element[0].disabled=!1;b.Widget.prototype.enable.call(this)},disable:function(){this.buttons.addClass("ui-state-disabled").removeClass("ui-state-hover");this.element[0].disabled=!0;b.Widget.prototype.disable.call(this)},destroy:function(){this.wrapper.remove();this.element.unbind(".uispinner").css({width:this.oWidth,marginRight:this.oMargin});b.Widget.prototype.destroy.call(this)}})})(jQuery);var qq=qq||{};qq.extend=function(b,a){for(var c in a)b[c]=a[c]};qq.indexOf=function(b,a,c){if(b.indexOf)return b.indexOf(a,c);var c=c||0,d=b.length;for(0>c&&(c+=d);c<d;c++)if(c in b&&b[c]===a)return c;return-1};qq.getUniqueId=function(){var b=0;return function(){return b++}}();qq.ie=function(){return-1!=navigator.userAgent.indexOf("MSIE")};qq.safari=function(){return void 0!=navigator.vendor&&-1!=navigator.vendor.indexOf("Apple")};qq.chrome=function(){return void 0!=navigator.vendor&&-1!=navigator.vendor.indexOf("Google")};
qq.firefox=function(){return-1!=navigator.userAgent.indexOf("Mozilla")&&void 0!=navigator.vendor&&""==navigator.vendor};qq.windows=function(){return"Win32"==navigator.platform};qq.attach=function(b,a,c){b.addEventListener?b.addEventListener(a,c,!1):b.attachEvent&&b.attachEvent("on"+a,c);return function(){qq.detach(b,a,c)}};qq.detach=function(b,a,c){b.removeEventListener?b.removeEventListener(a,c,!1):b.attachEvent&&b.detachEvent("on"+a,c)};
qq.preventDefault=function(b){b.preventDefault?b.preventDefault():b.returnValue=!1};qq.insertBefore=function(b,a){a.parentNode.insertBefore(b,a)};qq.remove=function(b){b.parentNode.removeChild(b)};qq.contains=function(b,a){return b==a?!0:b.contains?b.contains(a):!!(a.compareDocumentPosition(b)&8)};qq.toElement=function(){var b=document.createElement("div");return function(a){b.innerHTML=a;a=b.firstChild;b.removeChild(a);return a}}();
qq.css=function(b,a){null!=a.opacity&&("string"!=typeof b.style.opacity&&"undefined"!=typeof b.filters)&&(a.filter="alpha(opacity="+Math.round(100*a.opacity)+")");qq.extend(b.style,a)};qq.hasClass=function(b,a){return RegExp("(^| )"+a+"( |$)").test(b.className)};qq.addClass=function(b,a){qq.hasClass(b,a)||(b.className+=" "+a)};qq.removeClass=function(b,a){b.className=b.className.replace(RegExp("(^| )"+a+"( |$)")," ").replace(/^\s+|\s+$/g,"")};qq.setText=function(b,a){b.innerText=a;b.textContent=a};
qq.children=function(b){for(var a=[],b=b.firstChild;b;)1==b.nodeType&&a.push(b),b=b.nextSibling;return a};qq.getByClass=function(b,a){if(b.querySelectorAll)return b.querySelectorAll("."+a);for(var c=[],d=b.getElementsByTagName("*"),e=d.length,f=0;f<e;f++)qq.hasClass(d[f],a)&&c.push(d[f]);return c};
qq.obj2url=function(b,a,c){var d=[],e="&",f=function(b,c){var e=a?/\[\]$/.test(a)?a:a+"["+c+"]":c;"undefined"!=e&&"undefined"!=c&&d.push("object"===typeof b?qq.obj2url(b,e,!0):"[object Function]"===Object.prototype.toString.call(b)?encodeURIComponent(e)+"="+encodeURIComponent(b()):encodeURIComponent(e)+"="+encodeURIComponent(b))};if(!c&&a)e=/\?/.test(a)?/\?$/.test(a)?"":"&":"?",d.push(a),d.push(qq.obj2url(b));else if("[object Array]"===Object.prototype.toString.call(b)&&"undefined"!=typeof b)for(var g=
0,c=b.length;g<c;++g)f(b[g],g);else if("undefined"!=typeof b&&null!==b&&"object"===typeof b)for(g in b)f(b[g],g);else d.push(encodeURIComponent(a)+"="+encodeURIComponent(b));return a?d.join(e):d.join(e).replace(/^&/,"").replace(/%20/g,"+")};qq=qq||{};
qq.FileUploaderBasic=function(b){this._options={debug:!1,action:"",params:{},customHeaders:{},button:null,multiple:!1,maxConnections:3,disableCancelForFormUploads:!1,autoUpload:!0,forceMultipart:!1,allowedExtensions:[],acceptFiles:null,sizeLimit:0,minSizeLimit:0,stopOnFirstInvalidFile:!0,onSubmit:function(){},onComplete:function(){},onCancel:function(){},onUpload:function(){},onProgress:function(){},onError:function(){},messages:{typeError:"{file} has an invalid extension. Valid extension(s): {extensions}.",
sizeError:"{file} is too large, maximum file size is {sizeLimit}.",minSizeError:"{file} is too small, minimum file size is {minSizeLimit}.",emptyError:"{file} is empty, please select files again without it.",noFilesError:"No files to upload.",onLeave:"The files are being uploaded, if you leave now the upload will be cancelled."},showMessage:function(a){alert(a)},inputName:"qqfile"};qq.extend(this._options,b);this._wrapCallbacks();qq.extend(this,qq.DisposeSupport);this._filesInProgress=0;this._storedFileIds=
[];this._handler=this._createUploadHandler();this._options.button&&(this._button=this._createUploadButton(this._options.button));this._preventLeaveInProgress()};
qq.FileUploaderBasic.prototype={log:function(b){this._options.debug&&window.console&&console.log("[uploader] "+b)},setParams:function(b){this._options.params=b},getInProgress:function(){return this._filesInProgress},uploadStoredFiles:function(){for(;this._storedFileIds.length;)this._filesInProgress++,this._handler.upload(this._storedFileIds.shift(),this._options.params)},clearStoredFiles:function(){this._storedFileIds=[]},_createUploadButton:function(b){var a=this,c=new qq.UploadButton({element:b,
multiple:this._options.multiple&&qq.UploadHandlerXhr.isSupported(),acceptFiles:this._options.acceptFiles,onChange:function(b){a._onInputChange(b)}});this.addDisposer(function(){c.dispose()});return c},_createUploadHandler:function(){var b=this,a;a=qq.UploadHandlerXhr.isSupported()?"UploadHandlerXhr":"UploadHandlerForm";return new qq[a]({debug:this._options.debug,action:this._options.action,forceMultipart:this._options.forceMultipart,maxConnections:this._options.maxConnections,customHeaders:this._options.customHeaders,
inputName:this._options.inputName,demoMode:this._options.demoMode,onProgress:function(a,d,e,f){b._onProgress(a,d,e,f);b._options.onProgress(a,d,e,f)},onComplete:function(a,d,e){b._onComplete(a,d,e);b._options.onComplete(a,d,e)},onCancel:function(a,d){b._onCancel(a,d);b._options.onCancel(a,d)},onError:b._options.onError,onUpload:function(a,d,e){b._onUpload(a,d,e);b._options.onUpload(a,d,e)}})},_preventLeaveInProgress:function(){var b=this;this._attach(window,"beforeunload",function(a){if(b._filesInProgress)return a=
a||window.event,a.returnValue=b._options.messages.onLeave})},_onSubmit:function(){this._options.autoUpload&&this._filesInProgress++},_onProgress:function(){},_onComplete:function(b,a,c){this._filesInProgress--;if(!c.success)this._options.onError(b,a,c.error?c.error:"Upload failure reason unknown")},_onCancel:function(b){b=qq.indexOf(this._storedFileIds,b);this._options.autoUpload||0>b?this._filesInProgress--:this._options.autoUpload||this._storedFileIds.splice(b,1)},_onUpload:function(){},_onInputChange:function(b){this._handler instanceof
qq.UploadHandlerXhr?this._uploadFileList(b.files):this._validateFile(b)&&this._uploadFile(b);this._button.reset()},_uploadFileList:function(b){if(0<b.length)for(var a=0;a<b.length;a++)if(this._validateFile(b[a]))this._uploadFile(b[a]);else{if(this._options.stopOnFirstInvalidFile)break}else this._error("noFilesError","")},_uploadFile:function(b){var b=this._handler.add(b),a=this._handler.getName(b);!1!==this._options.onSubmit(b,a)&&(this._onSubmit(b,a),this._options.autoUpload?this._handler.upload(b,
this._options.params):this._storeFileForLater(b))},_storeFileForLater:function(b){this._storedFileIds.push(b)},_validateFile:function(b){var a,c;b.value?a=b.value.replace(/.*(\/|\\)/,""):(a=null!==b.fileName&&void 0!==b.fileName?b.fileName:b.name,c=null!==b.fileSize&&void 0!==b.fileSize?b.fileSize:b.size);if(this._isAllowedExtension(a)){if(0===c)return this._error("emptyError",a),!1;if(c&&this._options.sizeLimit&&c>this._options.sizeLimit)return this._error("sizeError",a),!1;if(c&&c<this._options.minSizeLimit)return this._error("minSizeError",
a),!1}else return this._error("typeError",a),!1;return!0},_error:function(b,a){var c=this._options.messages[b],d=this._options.allowedExtensions.join(", "),e=this._formatFileName(a),c=c.replace("{file}",e),c=c.replace("{extensions}",d),d=this._formatSize(this._options.sizeLimit),c=c.replace("{sizeLimit}",d),d=this._formatSize(this._options.minSizeLimit),c=c.replace("{minSizeLimit}",d);this._options.onError(null,a,c);this._options.showMessage(c)},_formatFileName:function(b){33<b.length&&(b=b.slice(0,
19)+"..."+b.slice(-13));return b},_isAllowedExtension:function(b){var b=-1!==b.indexOf(".")?b.replace(/.*[.]/,"").toLowerCase():"",a=this._options.allowedExtensions;if(!a.length)return!0;for(var c=0;c<a.length;c++)if(a[c].toLowerCase()==b)return!0;return!1},_formatSize:function(b){var a=-1;do b/=1024,a++;while(99<b);return Math.max(b,0.1).toFixed(1)+"kB MB GB TB PB EB".split(" ")[a]},_wrapCallbacks:function(){var b,a;b=this;a=function(a,c){try{return a.apply(b,c)}catch(f){b.log("Caught "+f+" in callback: "+
a)}};for(var c in this._options)/^on[A-Z]/.test(c)&&function(){var d=b._options[c];b._options[c]=function(){return a(d,arguments)}}()}};
qq.FileUploader=function(b){qq.FileUploaderBasic.apply(this,arguments);qq.extend(this._options,{element:null,listElement:null,dragText:"Drop files here to upload",extraDropzones:[],hideDropzones:!0,disableDefaultDropzone:!1,uploadButtonText:"Upload a file",cancelButtonText:"Cancel",failUploadText:"Upload failed",template:'<div class="qq-uploader">'+(!this._options.disableDefaultDropzone?'<div class="qq-upload-drop-area"><span>{dragText}</span></div>':"")+(!this._options.button?'<div class="qq-upload-button">{uploadButtonText}</div>':
"")+(!this._options.listElement?'<ul class="qq-upload-list"></ul>':"")+"</div>",fileTemplate:'<li><div class="qq-progress-bar"></div><span class="qq-upload-spinner"></span><span class="qq-upload-finished"></span><span class="qq-upload-file"></span><span class="qq-upload-size"></span><a class="qq-upload-cancel" href="#">{cancelButtonText}</a><span class="qq-upload-failed-text">{failUploadtext}</span></li>',classes:{button:"qq-upload-button",drop:"qq-upload-drop-area",dropActive:"qq-upload-drop-area-active",
dropDisabled:"qq-upload-drop-area-disabled",list:"qq-upload-list",progressBar:"qq-progress-bar",file:"qq-upload-file",spinner:"qq-upload-spinner",finished:"qq-upload-finished",size:"qq-upload-size",cancel:"qq-upload-cancel",failText:"qq-upload-failed-text",success:"qq-upload-success",fail:"qq-upload-fail",successIcon:null,failIcon:null},extraMessages:{formatProgress:"{percent}% of {total_size}",tooManyFilesError:"You may only drop one file"},failedUploadTextDisplay:{mode:"default",maxChars:50,responseProperty:"error",
enableTooltip:!0}});qq.extend(this._options,b);this._wrapCallbacks();qq.extend(this._options.messages,this._options.extraMessages);this._options.template=this._options.template.replace(/\{dragText\}/g,this._options.dragText);this._options.template=this._options.template.replace(/\{uploadButtonText\}/g,this._options.uploadButtonText);this._options.fileTemplate=this._options.fileTemplate.replace(/\{cancelButtonText\}/g,this._options.cancelButtonText);this._options.fileTemplate=this._options.fileTemplate.replace(/\{failUploadtext\}/g,
this._options.failUploadText);this._element=this._options.element;this._element.innerHTML=this._options.template;this._listElement=this._options.listElement||this._find(this._element,"list");this._classes=this._options.classes;this._button||(this._button=this._createUploadButton(this._find(this._element,"button")));this._bindCancelEvent();this._setupDragDrop()};qq.extend(qq.FileUploader.prototype,qq.FileUploaderBasic.prototype);
qq.extend(qq.FileUploader.prototype,{clearStoredFiles:function(){qq.FileUploaderBasic.prototype.clearStoredFiles.apply(this,arguments);this._listElement.innerHTML=""},addExtraDropzone:function(b){this._setupExtraDropzone(b)},removeExtraDropzone:function(b){var a=this._options.extraDropzones,c;for(c in a)if(a[c]===b)return this._options.extraDropzones.splice(c,1)},_leaving_document_out:function(b){return(qq.chrome()||qq.safari()&&qq.windows())&&0==b.clientX&&0==b.clientY||qq.firefox()&&!b.relatedTarget},
_storeFileForLater:function(b){qq.FileUploaderBasic.prototype._storeFileForLater.apply(this,arguments);this._find(this._getItemByFileId(b),"spinner").style.display="none"},_find:function(b,a){var c=qq.getByClass(b,this._options.classes[a])[0];if(!c)throw Error("element not found "+a);return c},_setupExtraDropzone:function(b){this._options.extraDropzones.push(b);this._setupDropzone(b)},_setupDropzone:function(b){var a=this,c=new qq.UploadDropZone({element:b,onEnter:function(c){qq.addClass(b,a._classes.dropActive);
c.stopPropagation()},onLeave:function(){},onLeaveNotDescendants:function(){qq.removeClass(b,a._classes.dropActive)},onDrop:function(c){a._options.hideDropzones&&(b.style.display="none");qq.removeClass(b,a._classes.dropActive);1<c.dataTransfer.files.length&&!a._options.multiple?a._error("tooManyFilesError",""):a._uploadFileList(c.dataTransfer.files)}});this.addDisposer(function(){c.dispose()});this._options.hideDropzones&&(b.style.display="none")},_setupDragDrop:function(){var b=this;if(!this._options.disableDefaultDropzone){var a=
this._find(this._element,"drop");this._options.extraDropzones.push(a)}var c=this._options.extraDropzones,d;for(d=0;d<c.length;d++)this._setupDropzone(c[d]);!this._options.disableDefaultDropzone&&!qq.ie()&&this._attach(document,"dragenter",function(){if(!qq.hasClass(a,b._classes.dropDisabled)){a.style.display="block";for(d=0;d<c.length;d++)c[d].style.display="block"}});this._attach(document,"dragleave",function(a){if(b._options.hideDropzones&&qq.FileUploader.prototype._leaving_document_out(a))for(d=
0;d<c.length;d++)c[d].style.display="none"});qq.attach(document,"drop",function(a){if(b._options.hideDropzones)for(d=0;d<c.length;d++)c[d].style.display="none";a.preventDefault()})},_onSubmit:function(b,a){qq.FileUploaderBasic.prototype._onSubmit.apply(this,arguments);this._addToList(b,a)},_onProgress:function(b,a,c,d){qq.FileUploaderBasic.prototype._onProgress.apply(this,arguments);var e=this._getItemByFileId(b);c===d&&(this._find(e,"cancel").style.display="none");var f=this._find(e,"size");f.style.display=
"inline";var g,i=Math.round(100*(c/d));g=c!=d?this._formatProgress(c,d):this._formatSize(d);this._find(e,"progressBar").style.width=i+"%";qq.setText(f,g)},_onComplete:function(b,a,c){qq.FileUploaderBasic.prototype._onComplete.apply(this,arguments);var d=this._getItemByFileId(b);qq.remove(this._find(d,"progressBar"));(!this._options.disableCancelForFormUploads||qq.UploadHandlerXhr.isSupported())&&qq.remove(this._find(d,"cancel"));qq.remove(this._find(d,"spinner"));c.success?(qq.addClass(d,this._classes.success),
this._classes.successIcon&&(this._find(d,"finished").style.display="inline-block",qq.addClass(d,this._classes.successIcon))):(qq.addClass(d,this._classes.fail),this._classes.failIcon&&(this._find(d,"finished").style.display="inline-block",qq.addClass(d,this._classes.failIcon)),this._controlFailureTextDisplay(d,c))},_onUpload:function(b,a,c){qq.FileUploaderBasic.prototype._onUpload.apply(this,arguments);var d=this._getItemByFileId(b);qq.UploadHandlerXhr.isSupported()&&(this._find(d,"progressBar").style.display=
"block");d=this._find(d,"spinner");"none"==d.style.display&&(d.style.display="inline-block")},_addToList:function(b,a){var c=qq.toElement(this._options.fileTemplate);if(this._options.disableCancelForFormUploads&&!qq.UploadHandlerXhr.isSupported()){var d=this._find(c,"cancel");qq.remove(d)}c.qqFileId=b;d=this._find(c,"file");qq.setText(d,this._formatFileName(a));this._find(c,"size").style.display="none";this._options.multiple||this._clearList();this._listElement.appendChild(c)},_clearList:function(){this._listElement.innerHTML=
"";this.clearStoredFiles()},_getItemByFileId:function(b){for(var a=this._listElement.firstChild;a;){if(a.qqFileId==b)return a;a=a.nextSibling}},_bindCancelEvent:function(){var b=this;this._attach(this._listElement,"click",function(a){var a=a||window.event,c=a.target||a.srcElement;if(qq.hasClass(c,b._classes.cancel)){qq.preventDefault(a);for(a=c.parentNode;void 0==a.qqFileId;)a=c=c.parentNode;b._handler.cancel(a.qqFileId);qq.remove(a)}})},_formatProgress:function(b,a){var c=this._options.messages.formatProgress,
d=Math.round(100*(b/a)),c=c.replace("{percent}",d),d=this._formatSize(a);return c=c.replace("{total_size}",d)},_controlFailureTextDisplay:function(b,a){var c,d,e,f;c=this._options.failedUploadTextDisplay.mode;d=this._options.failedUploadTextDisplay.maxChars;e=this._options.failedUploadTextDisplay.responseProperty;"custom"===c?(c=a[e])?(c.length>d&&(f=c.substring(0,d)+"..."),qq.setText(this._find(b,"failText"),f||c),this._options.failedUploadTextDisplay.enableTooltip&&this._showTooltip(b,c)):this.log("'"+
e+"' is not a valid property on the server response."):"none"===c?qq.remove(this._find(b,"failText")):"default"!==c&&this.log("failedUploadTextDisplay.mode value of '"+c+"' is not valid")},_showTooltip:function(b,a){b.title=a}});
qq.UploadDropZone=function(b){this._options={element:null,onEnter:function(){},onLeave:function(){},onLeaveNotDescendants:function(){},onDrop:function(){}};qq.extend(this._options,b);qq.extend(this,qq.DisposeSupport);this._element=this._options.element;this._disableDropOutside();this._attachEvents()};
qq.UploadDropZone.prototype={_dragover_should_be_canceled:function(){return qq.safari()||qq.firefox()&&qq.windows()},_disableDropOutside:function(){qq.UploadDropZone.dropOutsideDisabled||(this._dragover_should_be_canceled?qq.attach(document,"dragover",function(b){b.preventDefault()}):qq.attach(document,"dragover",function(b){b.dataTransfer&&(b.dataTransfer.dropEffect="none",b.preventDefault())}),qq.UploadDropZone.dropOutsideDisabled=!0)},_attachEvents:function(){var b=this;b._attach(b._element,"dragover",
function(a){if(b._isValidFileDrag(a)){var c=qq.ie()?null:a.dataTransfer.effectAllowed;a.dataTransfer.dropEffect="move"==c||"linkMove"==c?"move":"copy";a.stopPropagation();a.preventDefault()}});b._attach(b._element,"dragenter",function(a){if(b._isValidFileDrag(a))b._options.onEnter(a)});b._attach(b._element,"dragleave",function(a){if(b._isValidFileDrag(a)){b._options.onLeave(a);var c=document.elementFromPoint(a.clientX,a.clientY);if(!qq.contains(this,c))b._options.onLeaveNotDescendants(a)}});b._attach(b._element,
"drop",function(a){b._isValidFileDrag(a)&&(a.preventDefault(),b._options.onDrop(a))})},_isValidFileDrag:function(b){if(qq.ie())return!1;var b=b.dataTransfer,a=qq.safari();return b&&"none"!=b.effectAllowed&&(b.files||!a&&b.types.contains&&b.types.contains("Files"))}};
qq.UploadButton=function(b){this._options={element:null,multiple:!1,acceptFiles:null,name:"file",onChange:function(){},hoverClass:"qq-upload-button-hover",focusClass:"qq-upload-button-focus"};qq.extend(this._options,b);qq.extend(this,qq.DisposeSupport);this._element=this._options.element;qq.css(this._element,{position:"relative",overflow:"hidden",direction:"ltr"});this._input=this._createInput()};
qq.UploadButton.prototype={getInput:function(){return this._input},reset:function(){this._input.parentNode&&qq.remove(this._input);qq.removeClass(this._element,this._options.focusClass);this._input=this._createInput()},_createInput:function(){var b=document.createElement("input");this._options.multiple&&b.setAttribute("multiple","multiple");this._options.acceptFiles&&b.setAttribute("accept",this._options.acceptFiles);b.setAttribute("type","file");b.setAttribute("name",this._options.name);qq.css(b,
{position:"absolute",right:0,top:0,fontFamily:"Arial",fontSize:"118px",margin:0,padding:0,cursor:"pointer",opacity:0});this._element.appendChild(b);var a=this;this._attach(b,"change",function(){a._options.onChange(b)});this._attach(b,"mouseover",function(){qq.addClass(a._element,a._options.hoverClass)});this._attach(b,"mouseout",function(){qq.removeClass(a._element,a._options.hoverClass)});this._attach(b,"focus",function(){qq.addClass(a._element,a._options.focusClass)});this._attach(b,"blur",function(){qq.removeClass(a._element,
a._options.focusClass)});window.attachEvent&&b.setAttribute("tabIndex","-1");return b}};qq.UploadHandlerAbstract=function(b){this._options={debug:!1,action:"/upload.php",maxConnections:999,onProgress:function(){},onComplete:function(){},onCancel:function(){},onUpload:function(){}};qq.extend(this._options,b);this._queue=[];this._params=[]};
qq.UploadHandlerAbstract.prototype={log:function(b){this._options.debug&&window.console&&console.log("[uploader] "+b)},add:function(){},upload:function(b,a){var c=this._queue.push(b),d={};qq.extend(d,a);this._params[b]=d;c<=this._options.maxConnections&&this._upload(b,this._params[b])},cancel:function(b){this._cancel(b);this._dequeue(b)},cancelAll:function(){for(var b=0;b<this._queue.length;b++)this._cancel(this._queue[b]);this._queue=[]},getName:function(){},getSize:function(){},getQueue:function(){return this._queue},
_upload:function(){},_cancel:function(){},_dequeue:function(b){b=qq.indexOf(this._queue,b);this._queue.splice(b,1);var a=this._options.maxConnections;this._queue.length>=a&&b<a&&(b=this._queue[a-1],this._upload(b,this._params[b]))}};qq.UploadHandlerForm=function(b){qq.UploadHandlerAbstract.apply(this,arguments);this._inputs={};this._detach_load_events={}};qq.extend(qq.UploadHandlerForm.prototype,qq.UploadHandlerAbstract.prototype);
qq.extend(qq.UploadHandlerForm.prototype,{add:function(b){b.setAttribute("name",this._options.inputName);var a="qq-upload-handler-iframe"+qq.getUniqueId();this._inputs[a]=b;b.parentNode&&qq.remove(b);return a},getName:function(b){return this._inputs[b].value.replace(/.*(\/|\\)/,"")},_cancel:function(b){this._options.onCancel(b,this.getName(b));delete this._inputs[b];delete this._detach_load_events[b];if(b=document.getElementById(b))b.setAttribute("src","javascript:false;"),qq.remove(b)},_upload:function(b,
a){this._options.onUpload(b,this.getName(b),!1);var c=this._inputs[b];if(!c)throw Error("file with passed id was not added, or already uploaded or cancelled");var d=this.getName(b);a[this._options.inputName]=d;var e=this._createIframe(b),f=this._createForm(e,a);f.appendChild(c);var g=this;this._attachLoadEvent(e,function(){g.log("iframe loaded");var a=g._getIframeContentJSON(e);g._options.onComplete(b,d,a);g._dequeue(b);delete g._inputs[b];setTimeout(function(){g._detach_load_events[b]();delete g._detach_load_events[b];
qq.remove(e)},1)});f.submit();qq.remove(f);return b},_attachLoadEvent:function(b,a){this._detach_load_events[b.id]=qq.attach(b,"load",function(){if(b.parentNode){try{if(b.contentDocument&&b.contentDocument.body&&"false"==b.contentDocument.body.innerHTML)return}catch(c){}a()}})},_getIframeContentJSON:function(b){try{var a=b.contentDocument?b.contentDocument:b.contentWindow.document,c,d=a.body.innerHTML;this.log("converting iframe's innerHTML to JSON");this.log("innerHTML = "+d);"<pre>"==d.slice(0,
5).toLowerCase()&&"</pre>"==d.slice(-6).toLowerCase()&&(d=a.body.firstChild.firstChild.nodeValue);c=eval("("+d+")")}catch(e){c={success:!1}}return c},_createIframe:function(b){var a=qq.toElement('<iframe src="javascript:false;" name="'+b+'" />');a.setAttribute("id",b);a.style.display="none";document.body.appendChild(a);return a},_createForm:function(b,a){var c=qq.toElement('<form method="'+(this._options.demoMode?"GET":"POST")+'" enctype="multipart/form-data"></form>'),d=qq.obj2url(a,this._options.action);
c.setAttribute("action",d);c.setAttribute("target",b.name);c.style.display="none";document.body.appendChild(c);return c}});qq.UploadHandlerXhr=function(b){qq.UploadHandlerAbstract.apply(this,arguments);this._files=[];this._xhrs=[];this._loaded=[]};qq.UploadHandlerXhr.isSupported=function(){var b=document.createElement("input");b.type="file";return"multiple"in b&&"undefined"!=typeof File&&"undefined"!=typeof FormData&&"undefined"!=typeof(new XMLHttpRequest).upload};
qq.extend(qq.UploadHandlerXhr.prototype,qq.UploadHandlerAbstract.prototype);
qq.extend(qq.UploadHandlerXhr.prototype,{add:function(b){if(!(b instanceof File))throw Error("Passed obj in not a File (in qq.UploadHandlerXhr)");return this._files.push(b)-1},getName:function(b){b=this._files[b];return null!==b.fileName&&void 0!==b.fileName?b.fileName:b.name},getSize:function(b){b=this._files[b];return null!=b.fileSize?b.fileSize:b.size},getLoaded:function(b){return this._loaded[b]||0},_upload:function(b,a){this._options.onUpload(b,this.getName(b),!0);var c=this._files[b],d=this.getName(b);
this.getSize(b);this._loaded[b]=0;var e=this._xhrs[b]=new XMLHttpRequest,f=this;e.upload.onprogress=function(a){a.lengthComputable&&(f._loaded[b]=a.loaded,f._options.onProgress(b,d,a.loaded,a.total))};e.onreadystatechange=function(){4==e.readyState&&f._onComplete(b,e)};a=a||{};a[this._options.inputName]=d;var g=qq.obj2url(a,this._options.action);e.open(this._options.demoMode?"GET":"PUT",g,!0);e.setRequestHeader("X-Requested-With","XMLHttpRequest");e.setRequestHeader("X-File-Name",encodeURIComponent(d));
e.setRequestHeader("Cache-Control","no-cache");this._options.forceMultipart?(g=new FormData,g.append(this._options.inputName,c),c=g):(e.setRequestHeader("Content-Type","application/octet-stream"),e.setRequestHeader("X-Mime-Type",c.type));for(key in this._options.customHeaders)e.setRequestHeader(key,this._options.customHeaders[key]);e.send(c)},_onComplete:function(b,a){if(this._files[b]){var c=this.getName(b),d=this.getSize(b),e;this._options.onProgress(b,c,d,d);this.log("xhr - server response received");
this.log("responseText = "+a.responseText);try{e="function"===typeof JSON.parse?JSON.parse(a.responseText):eval("("+a.responseText+")")}catch(f){e={}}if(200!==a.status)this._options.onError(b,c,"XHR returned response code "+a.status);this._options.onComplete(b,c,e);this._xhrs[b]=null;this._dequeue(b)}},_cancel:function(b){this._options.onCancel(b,this.getName(b));this._files[b]=null;this._xhrs[b]&&(this._xhrs[b].abort(),this._xhrs[b]=null)}});
qq.DisposeSupport={_disposers:[],dispose:function(){for(var b;b=this._disposers.shift();)b()},addDisposer:function(b){this._disposers.push(b)},_attach:function(){this.addDisposer(qq.attach.apply(this,arguments))}};(function(b){b.widget("klearmatrix.module",{options:{moduleName:"module"},_create:function(){this.instances||b.extend(b.klearmatrix[this.options.moduleName],{instances:[]});b.klearmatrix[this.options.moduleName].instances.push(this.element)},_getOtherInstances:function(){var a=this.element;return b.grep(b.klearmatrix[this.options.moduleName].instances,function(b){return b!==a})},destroy:function(){var a=b.inArray(this.element,b.klearmatrix[this.options.moduleName].instances);-1<a&&b.klearmatrix[this.options.moduleName].instances.splice(a,
1);b.Widget.prototype.destroy.call(this)},_setOptions:function(){b.Widget.prototype._setOptions.apply(this,arguments)},_setOption:function(a,c){b.Widget.prototype._setOption.apply(this,arguments)},_parseDefaultItems:function(){this.options.data.title&&(this.options.data.title=b.klearmatrix.template.helper._parseDefaultValues({title:this.options.data.title,replaceParentPerItem:!1,defaultLang:this.options.data.defaultLang,parentIden:this.options.data.parentIden,columns:this.options.data.columns,values:this.options.data.values,
idx:0}))},getData:function(a){return this.options.data[a]?this.options.data[a]:this.options.data},_loadTemplate:function(a){a=b.tmpl(a,this.options.data,b.klearmatrix.template.helper);this._parseDefaultItems();return a},_getClearText:function(a){var c=[];a.each(function(){b(this).is(".multilang")?0<b(".multilangValue",b(this)).length&&(1==b(".selected",b(this)).length?c.push(b(".selected",b(this)).contents().first().text()):c.push(b(".multilangValue:eq(0)",b(this)).contents().first().text())):c.push(b(this).contents().first().text())});
return c.join(" ")},_resolveParentHolder:function(a){if(b(a).data("multiitem"))return b("td.multiItem input:checked");if(b(a).data("parentHolderSelector")){var c=b(a).parents(b(a).data("parentHolderSelector"));if(0<c.length)return c}switch(this.options.moduleParent?this.options.moduleParent:this.options.moduleName){case "list":return b(a).parents("tr:eq(0)");case "new":case "edit":return b(a).parents("form:eq(0)");default:throw"no parentHolder found for option";}},_registerFieldsEvents:function(){var a=
this,c=this.element;0<b(".fieldDecorator",c.klearModule("getPanel")).length&&b(".fieldDecorator",c.klearModule("getPanel")).each(function(){var d=b(this).data();b.extend(d,{value:b("#"+b(this).attr("rel")).val()});var e="list"==a.options.moduleName?"tr:eq(0)":"form:eq(0)",f="";b(this).data("command")?f=b(this).data("command"):(f=b(this).data("fielddecorator")+"_command",b.console.log("ATENCI\u00d3N: El atributo command no est\u00e1 configurado. Se utiliza el valor por defecto: "+b(this).data("fielddecorator")+
"_command"));d={file:c.klearModule("option","file"),pk:b(this).parents(e).data("id"),type:"command",post:d,command:f};d=b.klear.buildRequest(d);e=d.action;e+="&"+b.param(d.data);b(this).attr("href",e).html(b(this).data("fielddecoratort"));b.fn["klearmatrix."+b(this).data("field")+b(this).data("fielddecorator")]&&(d=b(this).data("field")+b(this).data("fielddecorator"),b(this)[d]({parent:a}))});0<b(".filePreview",c.klearModule("getPanel")).length&&b(".filePreview",c.klearModule("getPanel")).each(function(){var d;
d=b(this).data("filename")?{filename:b(this).data("filename")}:{filename:b(this).parent("span:eq(0)").data("filename")};var e=b(this),f="";b.each(["width","height","crop"],function(a,b){e.data(b)&&(d[b]=e.data(b));if("width"==b||"height"==b)f+=b+'="'+d[b]+'px" '});var g="list"==a.options.moduleName?"tr:eq(0)":"form:eq(0)",i={file:c.klearModule("option","file"),pk:b(this).parents(g).data("id"),type:"command",post:d,command:b(this).data("command")},g=b('<img class="imgFilePreviewList" '+f+" />"),i=
b.klear.buildRequest(i),j=i.action,j=j+("&"+b.param(i.data));g.attr("src",j);b(this).replaceWith(g)});0<b(".fieldInfo-tooltip",c.klearModule("getPanel")).length&&b(".fieldInfo-tooltip",c.klearModule("getPanel")).tooltip({content:function(){return $el.attr("data-title")}});0<b(".tooltip",c.klearModule("getPanel")).length&&b(".tooltip",c.klearModule("getPanel")).tooltip({content:function(){return b(this).attr("data-title")}});0<b("input.auto, textarea.auto",c.klearModule("getPanel")).length&&b("input.auto, textarea.auto",
c.klearModule("getPanel")).each(function(){if(b(this).data("plugin")){var d={};b.each(b(this).data(),function(a,b){a.match(/setting-*/)&&(a=a.replace("setting",""),a=a.charAt(0).toLowerCase()+a.substr(1),d||(d={}),d[a]=b)});(function f(d,i,j){if(!b.fn[i]){this.count++;if(20<this.count)return;setTimeout(function(){f(d,i,j)},50)}if(d[i])if(j._contentTab=c,d.data("basename"))d[i](j,a.options.data.columns[d.data("basename")].config);else d[i](j)})(b(this),b(this).data("plugin"),d)}});return this},_registerBaseEvents:function(){var a=
this.element,c=this;b(a.klearModule("getPanel")).off("click.closeTab").on("click.closeTab",".closeTab",function(b){b.preventDefault();b.stopPropagation();a.klearModule("close")});this._resolveAutoOption();this._doGhostList();var d=b(this.element.klearModule("getPanel"));this.options.parent&&(d=b(b(this.options.parent).klearModule("getPanel")));0<b("select:not(.notcombo, [data-decorator]).multiselect",d).length&&b("select:not(.notcombo, [data-decorator]).multiselect",d).multiselect({container:d,selectedList:4,
selectedText:b.translate("# of # selected"),checkAllText:b.translate("Select all"),uncheckAllText:b.translate("Unselect all"),noneSelectedText:b.translate("Select an option"),selectedText:b.translate("# selected"),position:{my:"center",at:"center"}}).multiselectfilter();b("select:not(.multiselect, .notcombo, [data-decorator])",d).selectBoxIt({theme:"jqueryui",autoWidth:!1,viewport:d}).add(b("input[type=hidden].readOnlySelectField",d)).on("change",function(){if("input"!=this.nodeName.toLowerCase()&&
!b(this).data("resizeTrick")&&b(this).data("target-for-change")){var a=b(this).data("target-for-change").attr("class");b(this).selectBoxIt({autoWidth:!0}).data("resizeTrick",!0).data("selectBoxIt").refresh(function(){this.dropdown.addClass(a)})}if(b(this).data("autofilter-select-by-data")){var c=b(this).data("autofilter-select-by-data").split("|"),d,i,j,m,h,k;for(k in c){d=c[k];i=d.split(":")[0];d=d.split(":")[1];j=b(this).val();h=b("select[name="+i+"]",b(this).parents("form:eq(0)"));(m=h.attr("id"))&&
(m="hiddenComboValues"+m);h.data("olds",h.val());i=b("#"+m);if(1>i.length)i=b("<select class='hidden' id='"+m+"' />"),b(this).parents("form:eq(0)").append(i);else{i.children("option").appendTo(h);h.val(h.data("olds"));m=h.data("preload");var l=h.find("option[value="+m+"]");m&&l?l.prop("selected",!0):h.find("option:eq(0)").prop("selected",!0)}$parent=h.parents(".container:eq(0)");$parent.css("opacity","0.5");m=h.data("selectBoxIt");d="[value=__NULL__],[data-"+d+"="+j+"]";b("option",h).not(d).appendTo(i);
"undefined"!==typeof m?(m.refresh(),m.dropdown.trigger("click"),m.close()):"undefined"!==typeof h.multiselect&&h.multiselect("refresh");$parent.css({opacity:1});b(this).trigger("manualchange")}}else b(this).trigger("manualchange")}).on("postmanualchange",function(){if(b(this).filter("select").data("target-for-change")){var a=b(this).data("target-for-change").attr("class");b(this).selectBoxIt().data("selectBoxIt").refresh(function(){this.dropdown.addClass(a)})}b(this).trigger("blur.selectBoxIt")}).on("open",
function(){if(c.options.parent)for(var a=b(this).parents("div").toArray();(parent=a.shift())&&!b(parent).hasClass("ui-tabs-panel");)b(parent).data("prevOverflow",b(parent).css("overflow")).css("overflow","visible")}).on("close",function(){if(c.options.parent)for(var a=b(this).parents("div").toArray();(parent=a.shift())&&b(parent).data("prevOverflow");)b(parent).css("overflow",b(parent).data("prevOverflow"))}).each(function(){b(this).data("target-for-change",b(this).next("span").children("span:eq(0)"));
b(this).is("[data-autofilter-select-by-data]")&&b(this).trigger("change")});b("a.option.screen",this.element.klearModule("getPanel")).off("mouseup.screenOption").on("mouseup.screenOption",function(d){d.preventDefault();d.stopPropagation();var f=b(this);c.options.parent&&(a=c.options.parent);var g=a.klearModule("getContainer"),i=a.klearModule("option","file");f.data("externalfile")&&(i=f.data("externalfile"));var j=f.data("screen"),m="#tabs-"+i;f.data("externalremovescreen")||(m+="_"+j);j=c._resolveParentHolder(this);
f.data("externalnoiden")||(m=f.data("multiinstance")?m+("_"+Math.round(1E5*Math.random(1E3,9999))):f.data("externalid")?m+("_"+f.data("externalid")):m+("_"+j.data("id")));j=j.data("id");if(f.data("externalname")){var h=f.parent().find("[name='"+f.data("externalname")+"']");0<h.length&&(j=h.val())}f.data("externalid")&&(j=f.data("externalid"));var k={post:{callerScreen:c.options.data.screen}};f.data("externalremovescreen")||(k.screen=f.data("screen"));f.data("externalnoiden")||(k.pk=j);h=!1;if(f.data("externalsearchby")){var h=
{searchFields:{},searchOps:{}},l=f.data("externalsearchby");h.searchFields[l]=[j];h.searchOps[l]=["eq"]}b.extend(k.post,h);var o;o=f.data("externaltitle")?f.data("externaltitle"):f.tooltip("close").attr("title");b(this).hasClass("_fieldOption")&&f.addClass("ui-state-highlight");0<b(m).length?($selTabLi=g.tabs("select",m).find(".ui-tabs-selected:eq(0)"),!1!==h&&$selTabLi.klearModule("option","dispatchOptions",k).klearModule("reDispatch"),$selTabLi.klearModule("updateTitle",o)):(j=a.klearModule("option",
"tabIndex")+1,g.one("tabspostadd",function(d,e){var g=b(e.tab).parent("li");g.klearModule("option","menuLink",f);g.klearModule("option","parentScreen",a);g.klearModule("updateTitle",o);g.klearModule("option","file",i);if(c.options.data.parentId){k.post.parentId=c.options.data.parentId;k.post.parentScreen=c.options.data.parentScreen}f.data("relatedtab",g);g.klearModule("option","dispatchOptions",k).klearModule("reload")}),b.klear.checkNoFocusEvent(d,b(a.klearModule("getPanel")).parent(),b(this)),g.tabs("add",
m,o,j))}).off("click.screenOption").on("click.screenOption",function(a){a.preventDefault();a.stopPropagation()}).filter("[data-shortcut]").each(function(){var c=b(this),d=b(this).data("shortcut").toUpperCase().charCodeAt(0);a.klearModule("registerShortcut",d,function(){c.trigger("mouseup.screenOption")})});b("a.option.dialog",this.element.klearModule("getPanel")).off("click.dialogOption").on("click.dialogOption",function(d,f){d.preventDefault();d.stopPropagation();var g=f&&f.external||!1;c.options.parent&&
(a=c.options.parent);var i=c._resolveParentHolder(this),j=i.data("id");1<b(i).length&&(j=[],b(i).each(function(){j.push(b(this).data("id"))}));var m=b(this);b(a).klearModule("showDialog","<br />",{title:b(this).attr("title")||"",template:'<div class="ui-widget">{{html text}}</div>',width:"auto"});var h=b(a).klearModule("getModuleDialog");b(a).moduleDialog("setAsLoading");h.data("dialogName",b(this).data("dialog"));i={callerScreen:c.options.data.screen};c.options.data.parentId&&(i.parentId=c.options.data.parentId,
i.parentScreen=c.options.data.parentScreen);f&&void 0!=typeof f.params&&b.extend(i,f.params);b(this).data("params")&&b.extend(i,b(this).data("params"));b.klear.request({file:a.klearModule("option","file"),type:"dialog",dialog:h.data("dialogName"),pk:j,post:i,external:g},function(b){if(g)h.moduleDialog("close");else h[b.plugin]({data:b.data,parent:a,caller:m})},function(){console.log(arguments)})}).off("mouseup.dialogOption").on("mouseup.dialogOption",function(a){a.preventDefault();a.stopPropagation()}).filter("[data-shortcut]").each(function(){var c=
b(this),d=b(this).data("shortcut").toUpperCase().charCodeAt(0);a.klearModule("registerShortcut",d,function(){c.trigger("click.dialogOption")})});b("a.option.command",this.element.klearModule("getPanel")).off("mouseup.commandOption").on("mouseup.commandOption",function(a){a.preventDefault();a.stopPropagation()}).off("click.commandOption").on("click.commandOption",function(d,f){d.preventDefault();d.stopPropagation();var g=b(this),i=f&&f.external||!1,i=g.data("external")?!0:i;c.options.parent&&(a=c.options.parent);
var j=c._resolveParentHolder(this),m={callerScreen:c.options.data.screen};c.options.data.parentId&&(m.parentId=c.options.data.parentId,m.parentScreen=c.options.data.parentScreen);f&&void 0!=typeof f.params&&b.extend(m,f.params);var h=b(a).klearModule("option","file"),k=g.data("disabledtime")||null;k&&(g.button("option","disabled","disabled"),window.setTimeout(function(){g.button("option","disabled",false)},k));b.klear.request({file:h,type:"command",command:g.data("command"),pk:j.data("id"),post:m,
external:i},function(){},function(){console.log(arguments)})}).filter("[data-shortcut]").each(function(){var c=b(this),d=b(this).data("shortcut").toUpperCase().charCodeAt(0);a.klearModule("registerShortcut",d,function(){c.trigger("click.commandOption")})});b("a[title]:not(.fieldInfo-box),span[title]",this.element.klearModule("getPanel")).tooltip();b(".fieldInfo-box",this.element.klearModule("getPanel")).toggle(function(){var a=b(this),c=a.parent().find(".fieldInfo-boxinfo");0>=c.length&&(c=b("<div />",
{"class":"fieldInfo-boxinfo ui-state-highlight ui-corner-all",html:"<p>"+a.data("title")+"</p>"}),c.hide(),a.parent().prepend(c));c.slideDown("slow")},function(){b(this).parent().find(".fieldInfo-boxinfo:eq(0)").slideUp("slow",function(){b(this).remove()})});return this},standardError:function(a){var c=b(this.element).klearModule("getModuleDialog"),d=b('<div><div class="dialogMessage">'+a.message+"</div></div>");c.moduleDialog("option","buttons",[{text:b.translate("Close"),click:function(){c.moduleDialog("close")}}]);
var e="";if("undefined"!=typeof a.exceptionCode){var f=b.klear.fetchErrorByCode(a.exceptionCode);f&&(e=" ("+a.exceptionCode+")",d.html(f.replace(/%message%/,a.message)))}if("undefined"!=typeof a.traceString){var f=b('<p><a class="show-trace" href="#">Show trace string</a></p>'),g=b('<div class="trace">'+a.traceString.replace(/\n/g,"<br />")+"</div>");d.append(f).append(g);g.hide();f.on("click",function(a){a.preventDefault();g.toggle();c.moduleDialog("option","width",800)})}c.moduleDialog("option",
"title",b.translate("Error")+e);c.moduleDialog("updateContent",d)},_resolveAutoOption:function(){var a=b(this.element).klearModule("getContainer");b("span.autoOption",a).each(function(){var a=b(this).data();b(this).replaceWith(b.klearmatrix.template.helper.option2HTML(a,"Field",null,null))})},_doGhostList:function(){var a=b(this.element).klearModule("getContainer");b("ul.ghostList",a).each(function(){$optionHolder=b(this).next(".ghostListOptions");$optionHolder.hide();$futureOptions=b(".opClone",
b(this));b("a",$optionHolder).each(function(){var a=!1;if(b(this).hasClass("screen"))a=b(this).data("screen");else if(b(this).hasClass("dialog"))a=b(this).data("dialog");else if(b(this).hasClass("command"))a=b(this).data("command");else return;var d=b("<div />").append(b(this)).html();$futureOptions.filter("[data-link='"+a+"']").replaceWith(d)})});b(".ghostListCounter input",a).off("doSum").on("doSum",function(){var a=b(this).parent();b("span.counter",a).html(a.next("ul.ghostList").find("li:visible").length)}).off("keyup.ghostfilter").on("keyup.ghostfilter",
function(){var a=b(this).parent().next("ul.ghostList").find("li");a.show();""!=b(this).val()&&a.not(":contains("+b(this).val()+")").hide();b(this).trigger("doSum")}).trigger("keyup.ghostfilter");b(".ghostTableCounter input",a).off("doSum").on("doSum",function(){var a=b(this).parent();b("span.counter",a).html(a.next("div.ghostTableContainer").find("tr.hideable:visible").length)}).off("keyup.ghostfilter").on("keyup.ghostfilter",function(){var a=b(this).parent().next("div.ghostTableContainer").find("tr.hideable");
a.show();""!=b(this).val()&&a.not(":contains("+b(this).val()+")").hide();b(this).trigger("doSum")}).trigger("keyup.ghostfilter")}})})(jQuery);(function load(a){a.klear.checkDeps(["$.klearmatrix.module"],load)&&(a.widget("klearmatrix.genericdialog",a.klearmatrix.module,{options:{data:null,moduleName:"genericdialog"},_super:a.klearmatrix.module.prototype,_create:function(){this._super._create.apply(this)},_getDialogContent:function(){return this.options.data.message},_getTitle:function(){return this.options.data.title},_getOptions:function(){return this.options.data.options||[]},_getButtons:function(){var c=[],d;for(d in this.options.data.buttons)c.push(function(c,
d){return{text:c,click:function(){a(this).moduleDialog("close");if(d.options.data.buttons[c].recall){var g={params:d.options.data.buttons[c].params||{},external:d.options.data.buttons[c].external||!1},i={};a.each(a("input,select,textarea",a(d.element)),function(){if(!("radio"==a(this).attr("type")||"checkbox"==a(this).attr("type"))||a(this).is(":checked"))i[a(this).attr("name")]=a(this).val()});a.extend(g.params,i);d.options.caller.trigger("click",g)}d.options.data.buttons[c].reloadParent&&a(d.options.parent).klearModule("reDispatch")}}}(d,
this));return c},_init:function(){var c=this;a(this.element).moduleDialog("setAsLoading");a(this.element).moduleDialog("option","buttons",this._getButtons());a(this.element).moduleDialog("updateContent",this._getDialogContent(),function(){c._registerBaseEvents();c._registerFieldsEvents()});a(this.element).moduleDialog("updateTitle",this._getTitle());var d=this._getOptions();a.each(d,function(d,f){a(c.element).moduleDialog("option",d,f)})}}),a.widget.bridge("klearMatrixGenericDialog",a.klearmatrix.genericdialog))})(jQuery);(function load(a){a.klear.checkDeps(["$.klearmatrix.module","$.ui.form"],load)&&(a.widget("klearmatrix.genericscreen",a.klearmatrix.module,{options:{data:null,moduleName:"genericscreen"},_super:a.klearmatrix.module.prototype,_create:function(){this._super._create.apply(this)},_init:function(){if(this.options.data.templateName){var c=this._loadTemplate(this.options.data.templateName);a(this.element.klearModule("getPanel")).append(c);this._registerBaseEvents()}}}),a.widget.bridge("klearMatrixGenericScreen",
a.klearmatrix.genericscreen))})(jQuery);(function(b){b.klearmatrix=b.klearmatrix||{};b.klearmatrix.template=b.klearmatrix.template||{};b.klearmatrix.template.helper={debug:function(){console.log(arguments);return""},_checkNull:function(a){return null===a||"undefined"==typeof a||!1===a||""===a},cleanValue:function(a,c,d){"undefined"==typeof c&&(c="");d&&!c.match(d)&&(c="");return this._checkNull(a)?c:b("<div/>").text(a).html()},_formatSizeUnits:function(a){if(0==a)return'<span class="zero">0 B</span>';var b=parseInt(Math.floor(Math.log(a)/
Math.log(1024)));return Math.round(a/Math.pow(1024,b),2)+["B","KB","MB","GB","TB"][b]},getSizeForField:function(a,b){if(!b.properties||b.properties&&!b.properties.showSize)return"";var d='<div class="size-indicator">';if(b.multilang){var e=!0,f;for(f in this.data.langs){var g=this.data.langs[f];"string"==typeof a[g]&&(e||(d+=" / "),d+=g+": "+this._formatSizeUnits(unescape(encodeURIComponent(a[g])).length));e&&(e=!1)}}else d+=this._formatSizeUnits(unescape(encodeURIComponent(a)).length);return d+"</div>"},
getEditDataForField:function(a,c,d){var e=c.config||!1,f=c.properties||!1,g=c.errors||!1,i="";!0!==d?i="object"!=typeof a&&!c.dirty?this.cleanValue(a,"",c.properties&&c.properties.pattern||""):this._checkNull(a)?"":a:c.properties&&null!==c.properties.defaultValue&&(i=c.properties.defaultValue);if(c.disabledOptions&&c.disabledOptions.valuesCondition&&("null"==c.disabledOptions.valuesCondition&&(c.disabledOptions.valuesCondition=null),a==c.disabledOptions.valuesCondition))return c.disabledOptions.label;
this.data&&this.data.parentItem==c.id&&(c.readonly=!0,i=this.data.parentId);var a=this.data&&this.data.randIden?this.data.randIden:Math.round(1E4*Math.random(1E4)),i={_elemIden:c.id+a,_elemName:c.id,_elemBaseName:c.id,_readonly:c.readonly?!0:!1,_keepTextArea:c.keepTextArea?!0:!1,_dataConfig:e,_decorators:c.decorators,_properties:f,_fieldValue:i,_errors:g},j=b("<div />"),m=this,h={dataParser:function(a){return a=a.charAt(0).toLowerCase()+a.substr(1).replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()})},
drawSelected:function(a,c){var d=b("<div>"+c+"</div>").text();return a==d?'selected="selected"':""},formatSizeForFile:function(a){return a.size?m._formatSizeUnits(parseInt(a.size)):""}};if(c.multilang){var k=b("<dl />");k.addClass("multiLanguage");for(var l in this.data.langs){var o=this.data.langs[l],p=d?"":this.cleanValue(i._fieldValue[o]),p={_elemIden:c.id+o+a,_elemName:c.id+o,_elemBaseName:c.id,_readonly:c.readonly?!0:!1,_dataConfig:e,_properties:f,_fieldValue:p,_errors:g,_multilang:!0,_locale:this.data.langDefinitions[o].locale},
n=b("<div />");b.tmpl(this.getTemplateNameForType(c.type),p,h).appendTo(n);p={_iden:p._elemIden,_lang:o,_field:n.html(),_class:o==b.klear.language?"selected":""};o==b.klear.language?b.tmpl("klearmatrixMultiLangField",p).prependTo(k):b.tmpl("klearmatrixMultiLangField",p).appendTo(k)}k.appendTo(j)}else b.tmpl(this.getTemplateNameForType(c.type),i,h).appendTo(j);return j.html()},isMultiItemSelectableList:function(a){for(var b in a)if(a[b].multiItem)return!0;return!1},getColumnName:function(a,b){for(var d in a)if(a[d].id==
b)return a[d].name;return!1},getColumn:function(a,b){for(var d in a)if(a[d].id==b)return a[d];return!1},getIndex:function(a,b){return!a[b]?"error":a[b]},parseOptionCustomization:function(a,c){var d="";if(!a||"undefined"==typeof a[c[c.type]])return d;d=b("<"+a[c[c.type]].wrapper+"/>");d.addClass(a[c[c.type]]["class"]);d.html(a[c[c.type]].result);return d.wrap("<div></div>").parent().html()},parseParentOptionCustomizationOpen:function(a,b){var d;return!a||"undefined"==typeof a[b[b.type]]?"":d="<"+a[b[b.type]].parentWrapper+
" class='"+a[b[b.type]].parentClass+"'>"},parseParentOptionCustomizationClose:function(a,b){var d;return!a||"undefined"==typeof a[b[b.type]]?"":d="</"+a[b[b.type]].parentWrapper+" >"},getMultiLangValue:function(a,c,d){var e=b("<div />"),f;for(f in c){var g={_lang:c[f],_value:this.cleanValue(a[c[f]]),_default:c[f]==d};_compiled=b.tmpl("klearmatrixMultiLangList",g);e.append(_compiled)}return e.html()},getValuesFromSelectColumn:function(a,c){switch(a.type){case "select":var d={},e;for(e in a.config.values)d[a.config.values[e].key]=
a.config.values[e].item;if(void 0!=typeof c&&a.decorators&&a.decorators.autocomplete){var f=b('<span class="autocomplete" />').attr({"data-value":c,"data-reverse":"true","data-fielddecorator":"autocomplete","data-field":"select"}),g;for(g in a.decorators)for(var i in a.decorators[g])f.attr("data-"+i,a.decorators[g][i]);return b("<p>").append(f).html()}return"undefined"!=typeof c&&"undefined"!=typeof d[c]?d[c]:d;case "multiselect":a.config.values.__className&&delete a.config.values.__className;d={};
for(e in a.config.values)if(d[a.config.values[e].key]=a.config.values[e].item,"undefined"!=typeof c&&a.config.values[e].key==c)return a.config.values[e].item;if("undefined"!=typeof c&&a.decorators&&a.decorators.autocomplete){d=[];for(f in c.relIndex)d.push(c.relStruct[c.relIndex[f]].relatedId);f=b('<span class="autocomplete" />').attr({"data-value":d.join(","),"data-reverse":"true","data-fielddecorator":"autocomplete","data-field":"multiselect"});for(g in a.decorators)for(i in a.decorators[g])f.attr("data-"+
i,a.decorators[g][i]);return b("<p>").append(f).html()}return"undefined"!=typeof c&&a.config.values[c]?d[c]:d}return"undefined"!=typeof c?this.cleanValue(c):!1},_getProperty:function(a,b){return!a.properties||!a.properties[b]?"":a.properties[b]},getPrefix:function(a){return this._getProperty(a,"prefix")},getSufix:function(a){return this._getProperty(a,"sufix")},getStringIndexFromColumn:function(a,c){var d=this.getIndexFromColumn(a,c),e=b("<div />").html(d);return 0<b("div.multilangValue",e).length?
(d=b("div.multilangValue.selected",e),b("span",d).remove(),d.text()):d},getIndexFromColumn:function(a,c){if("undefined"==typeof a[c.id])return"";switch(c.type){case "select":var d=a[c.id];return d&&c.decorators?this.getValuesFromSelectColumn(c,d):this.getValuesFromSelectColumn(c)[d]?this.getValuesFromSelectColumn(c)[d]:null==d&&this.getValuesFromSelectColumn(c).__null__?this.getValuesFromSelectColumn(c).__null__:"";case "multiselect":if(c.decorators){var e=this.getValuesFromSelectColumn(c,a[c.id]);
return e}var e=this.getValuesFromSelectColumn(c),f=[];for(d in a[c.id].relStruct){var g=a[c.id].relStruct[d].relatedId;e[g]&&f.push(e[g])}return 0==f.length?"<em>"+b.translate("There are not associated elements")+"</em>":f.join(", ");case "file":d="";if(c.config&&c.config.options)for(e in c.config.options)if(c.config.options[e].listController){g=c.config.options[e];d+='<a data-filename="'+a[c.id].name+'" href="#" ';d+=' class="option ';g["class"]&&(d+=g["class"]+" ");g.type&&(d+=g.type);d+='" ';g.type&&
(d+=" data-"+g.type+'="'+g.target+'" ');if(g.props)for(f in g.props)d+="data-"+f+'="'+g.props[f]+'" ';g.external&&(d+='data-external="true"');d+=">";g.icon&&(d+='<span class="ui-silk inline '+g.icon+'"></span>');d+="</a>"}return c.config.options.hiddenName?d:d+this.cleanValue(a[c.id].name);case "checkbox":return d="closethick",1==a[c.id]&&(d="check"),'<span class="ui-icon ui-icon-'+d+'" />';case "video":return this.cleanValue(a[c.id].title);case "map":var d="http://maps.googleapis.com/maps/api/staticmap?center=%lat%,%lng%&zoom=%zoom%&size=%width%x%height%&sensor=false",
e="&markers=color:red%7C%lat%,%lng%",f=!0,g=a[c.id].lat,i=a[c.id].lng;null==g||null==i?(i=g="0.0",d=d.replace(/%zoom%/g,"1"),f=!1):d=d.replace(/%zoom%/g,a[c.id].previewZoom);d=d.replace(/%lat%/g,g);d=d.replace(/%lng%/g,i);d=d.replace(/%width%/g,a[c.id].previewWidth);d=d.replace(/%height%/g,a[c.id].previewHeight);f&&(e=e.replace(/%lat%/g,g),e=e.replace(/%lng%/g,i),d+=e);return'<img src="'+d+'" class="makeItBigger" />';default:if(c.properties&&c.properties.maxLength)if("string"==typeof a[c.id])a[c.id].length>
c.properties.maxLength&&(a[c.id]=a[c.id].substring(0,c.properties.maxLength),a[c.id]+="...");else for(idx in a[c.id])a[c.id][idx].length>c.properties.maxLength&&(a[c.id][idx]=a[c.id][idx].substring(0,c.properties.maxLength),a[c.id][idx]+="...");return c.multilang?this.getMultiLangValue(a[c.id],this.data.langs,b.klear.language):c.dirty?this._checkNull(a[c.id])?"":a[c.id]:this.cleanValue(a[c.id],"")}},getTemplateNameForType:function(a){return"klearMatrixFields"+a},getTemplateForType:function(a){return b.template[this.getTemplateNameForType(a)]},
getPaginatorTemplate:function(){return b.template.klearmatrixPaginator},getOptionTemplateName:function(){return"klearmatrixOption"},_parseDefaultValues:function(a){var c=a.title;if("string"!=typeof a.title||!c.match(/\%item\%|%parent%/))return c;var d=a.replaceParentWithItem,e=a.defaultLang,f=a.parentIden,g=a.columns,i=a.idx,a=a.values,j="",j="";if(b.isArray(a)&&0<a.length&&a[i]){var a=a[i],m=!1,i=[],h;for(h in g)!1===m&&(j=g[h],m=!0),g[h]["default"]&&i.push(g[h]);0==i.length&&i.push(j);g=[];for(h in i)j=
i[h],j.multilang?g.push(a[j.id][e]):"file"==j.type?g.push(a[j.id].name):g.push(a[j.id]);j=g.join(" ")}else j="";j=this.cleanValue(j);d=d?this.cleanValue(j):this.cleanValue(f);return this.buildTitleString(c,j,d)},htmlentities:function(a){return!a?"":a.replace(/[\u00A0-\u9999<>\&]/gim,function(a){return"&#"+a.charCodeAt(0)+";"})},buildTitleString:function(a,b,d){var b=b||"",d=d||"",e=[],f="";(e=a.match(/\[format\|(.*[\%parent\%|\%item\%].*)\]/))?2==e.length&&(e[1].match(/\%parent%/)&&(f=""!=d.trim()?
a.replace(e[0],e[1].replace(/\%parent\%/,d)):a.replace(e[0],"")),e[1].match(/\%item%/)&&(f=""!=b.trim()?a.replace(e[0],e[1].replace(/\%item\%/,b)):a.replace(e[0],""))):f=a.replace(/\%parent\%/,d).replace(/\%item\%/,b);return f},getTitle:function(a,b,d){return this._parseDefaultValues({title:a,replaceParentWithItem:d,defaultLang:this.data.defaultLang,parentIden:this.data.parentIden,columns:this.data.columns,values:this.data.values,idx:b})},getExternalData:function(a){for(var b=["file","noiden","searchby",
"removescreen","title"],d={attributes:[],values:[]},e=0;e<b.length;e++)a["external"+b[e]]&&(d.attributes.push("external"+b[e]),d.values.push(a["external"+b[e]]));return d},option2HTML:function(a,c,d,e){var f="",g=!1,i=[],j=!1;if(!1!==d&&(a.showOnlyOnNotNull||a.showOnlyOnNull))if(e&&a.showOnlyOnNull||!e&&a.showOnlyOnNotNull)return"";var m=b("<div />"),h=a.label?!0:!1;!1!==d&&(this.data&&this.data.values)&&(j=this.data.values[d]);var k=!1;a.externalOption&&(k=this.getExternalData(a),a.externalOption&&
(j&&e)&&(k.attributes.push("externalid"),k.values.push(e)));switch(c){case "List":!1===d?(i.push("_generalOption"),f=this.getTitle(a.title,!1,!1),h&&"string"==typeof a.label&&(g=this.getTitle(a.label,!1,!1)),a.labelOnList&&("string"==typeof a.labelOnList&&(g=this.getTitle(a.labelOnList,!1)),h=!0)):(a.multiItem=!1,i.push("_fieldOption inherit ui-state-nojump"),f=this.getTitle(a.title,d,a.labelReplaceParentWithItem),h&&"string"==typeof a.label&&(g=this.getTitle(a.label,d,a.labelReplaceParentWithItem)));
break;case "Edit":f=this.getTitle(a.title,d,!0);h&&"string"==typeof a.label&&(g=this.getTitle(a.label,d,!0));a.labelOnEdit&&("string"==typeof a.labelOnEdit&&(g=this.getTitle(a.labelOnEdit,d,!0)),h=!0);a.multiItem=!1;e?i.push("_fieldOption inherit ui-state-nojump"):i.push("_generalOption");break;case "Field":f=a.title,a.multiItem=!1,h&&"string"==typeof a.label&&(g=a.label),a.from&&"postActionOptions"==a.from&&a.labelOnPostAction&&("string"==typeof a.labelOnPostAction&&(g=a.labelOnPostAction),h=!0),
i.push("_fieldOption inherit ui-state-nojump")}!1===g&&(g=f);a.defaultOption&&i.push("default");a={classes:i.join(" "),type:a.type,icon:a.icon,optionIndex:this.getIndex(a,a.type),optionTitle:this.htmlentities(this.buildTitleString(f)),shortcut:a.shortcut||!1,multiInstance:a.multiInstance||!1,external:a.external||!1,externalData:k,disabledTime:a.disabledTime||!1,multiItem:a.multiItem||!1,mustShowLabel:h,alwaysEnabled:a.alwaysEnabled,parentHolderSelector:a.parentHolderSelector||!1,buttonLabel:this.buildTitleString(g)};
b.tmpl(this.getOptionTemplateName(),a).appendTo(m);return m.html()},mustShowOptionColum:function(){return!0}}})(jQuery);(function load(a){a.klear.checkDeps(["$.klearmatrix.module","$.ui.form"],load)&&(a.widget("klearmatrix.list",a.klearmatrix.module,{options:{data:null,moduleName:"list"},_intervals:{},_super:a.klearmatrix.module.prototype,_create:function(){this._super._create.apply(this)},_init:function(){this.options.data.title=this.options.data.title||this.options.title;var c=this._loadTemplate("klearmatrixList");a(this.element.klearModule("getPanel")).append(c);this._applyDecorators()._registerBaseEvents()._registerFieldsEvents()._registerEvents()},
destroy:function(){this._clearInterval();this._super.destroy.apply(this)},_clearInterval:function(){for(idx in this._intervals)idx==a(this.element.klearModule("getPanel")).attr("id")&&clearInterval(this._intervals[idx])},_applyDecorators:function(){var c=this.element;$container=a(this.element.klearModule("getPanel"));a(".generalOptionsToolbar .action, .generalOptionsToolbar a",$container).button();if(0<a("td.multilang",$container).length){var d=a("<span>").addClass("ui-silk ui-silk-comments mlTag").attr("title",
a.translate("Field available in multi-language"));a("td.multilang",$container).each(function(){a(this).prepend(d.clone().tooltip())})}a("caption span.extraCaptionInfo input",$container).spinner().on("keydown",function(c){13==c.keyCode&&a(this).trigger("fireit")}).on("fireit",function(){var d=parseInt(a(this).val()),f=a(c).klearModule("option","dispatchOptions");f.post||(f.post={});a.extend(f.post,{count:d});a(c).klearModule("option","dispatchOptions",f).klearModule("reDispatch")});return this},_registerEvents:function(){function c(){var c=
parseInt(a(".generalOptionsToolbar .refresh:eq(0) .count",f).html()),g=c-1;16==c&&a(".generalOptionsToolbar .refresh",f).fadeIn();1==c?(e._clearInterval(),a(d).klearModule("reDispatch")):a(".generalOptionsToolbar .refresh .count",f).html(g)}var d=this.element,e=this,f=this.element.klearModule("getPanel"),g=a("table.kMatrix tr",f);a("td",g).on("mouseenter mouseleave",function(){a("td:not(.options)",a(this).parent("tr")).toggleClass("ui-state-highlight");!a(this).is(".options")&&0<a("a.option.default",
a(this).parent("tr")).length&&(a(this).parent("tr").toggleClass("pointer"),a("a.option.default",a(this).parent("tr")).toggleClass("ui-state-active"))}).on("mouseup",function(c){c.stopPropagation();c.preventDefault();if((!document.getSelection()||!(""!=document.getSelection().toString()&&1==a(document.getSelection().focusNode).parents("table.kMatrix").length))&&!a(this).is(".options"))if(a(this).hasClass("multiItem"))c=a("input:checkbox",a(this)),c.prop("checked",!c.is(":checked"));else if(c.shiftKey&&
0<a("td.multiItem",a(this).parent("tr")).length)a("td.multiItem",a(this).parent("tr")).trigger("mouseup"),document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges();else{a.klear.checkNoFocusEvent(c,a(f).parent(),a("a.option.default",a(this).parent("tr")));var c=a("a.option.default",a(this).parent("tr")),d=c.is(".screen")?"mouseup":"click";c.trigger(d)}});a("a._fieldOption",f).on("mouseenter",function(){a(this).data("relatedtab")&&a(this).data("relatedtab").klearModule("highlightOn")}).on("mouseleave",
function(){a(this).data("relatedtab")&&a(this).data("relatedtab").klearModule("highlightOff")});a(".paginator a",f).on("click",function(c){c.preventDefault();c.stopPropagation();var c=a(this).data("page"),e=a(d).klearModule("option","dispatchOptions");e.post||(e.post={});a.extend(e.post,{page:c});a(d).klearModule("option","dispatchOptions",e).klearModule("reDispatch")});var i=a(".generalOptionsToolbar .refresh",f).data("auto-refresh"),j=a(f).attr("id");this._clearInterval();i&&(a(".generalOptionsToolbar .refresh",
f).hide(),this._intervals[j]=setInterval(function(){c()},1E3));a(".generalOptionsToolbar .refresh",f).on("click",function(d){d.preventDefault();d.stopPropagation();clearInterval(e._intervals[j]);a(".generalOptionsToolbar .refresh",f).fadeOut();a(".generalOptionsToolbar .refresh .count",f).text(i);e._intervals[j]=setInterval(function(){c()},1E3)});a("th:not(.notSortable)",f).on("click",function(c){c.preventDefault();c.stopPropagation();var c=a(this).data("field"),e=a("span.asc",a(this)).length>0?"desc":
"asc",f=a(d).klearModule("option","dispatchOptions");if(!f.post)f.post={};a.extend(f.post,{order:c,orderType:e,page:1});a(d).klearModule("option","dispatchOptions",f).klearModule("reDispatch")}).css("cursor","pointer");a("th.multiItem",f).on("mouseup",function(c){c.stopPropagation();c.preventDefault();c=!a("input:checkbox",a(this)).is(":checked");a(".multiItem input:checkbox",f).prop("checked",c)}).css("cursor","pointer");a(".multiItem input:checkbox",f).on("click",function(a){a.preventDefault()});
a("th:not(.notSortable) span.filter",f).on("click",function(a){a.stopPropagation();a.preventDefault()});a("th.multiItem",f).on("refreshButtons",function(){var c=a("td.multiItem input:checked",f).length;a("a._generalOption[data-multiitem]",f).each(function(){var d=a(this).data("alwaysenabled")===true?false:c==0;a(this).button("option","disabled",d);c>0?a("sup",a(this)).html("("+c+")"):a("sup",a(this)).html("")});var d=c==a("td.multiItem input:checkbox",f).length;a("th.multiItem input:checkbox",f).prop("checked",
d)});a(".multiItem",f).on("mouseup",function(){a("th.multiItem",f).trigger("refreshButtons")});a("th.multiItem",f).trigger("refreshButtons");a("span.mlTag",f).on("click",function(c){c.preventDefault();c.stopPropagation();var c=a(this).parent("td"),d=a("div.multilangValue:not(.selected)",c).is(":visible");a("div.multilangValue:not(.selected)",c).slideToggle();d?a(".langIden",c).animate({opacity:"0"}):a(".langIden",c).animate({opacity:".5"})}).on("mouseup",function(a){a.preventDefault();a.stopPropagation()});
var m=a("input[name=applyFilters]",f);a(".klearMatrixFiltering span.addTerm",f).on("click",function(c,e){c.preventDefault();c.stopPropagation();var g=a(this).parents(".klearMatrixFiltering"),i=a("input.term",g),h=a("select[name=searchField]",g),j=a(d).klearModule("option","dispatchOptions"),k=h.val();j.post=j.post||{};j.post.searchFields=j.post.searchFields||{};j.post.searchOps=j.post.searchOps||{};j.post.searchFields[k]=j.post.searchFields[k]||[];j.post.searchOps[k]=j.post.searchOps[k]||[];if(e!==
true){if(i.data("autocomplete")&&!i.data("idItem")||i.val()==""){a(this).parents(".filterItem:eq(0)").effect("shake",{times:3},60);return}i.attr("disabled","disabled");h.attr("disabled","disabled");i=i.data("autocomplete")?i.data("idItem"):i.val();j.post.searchFields[k].push(i);i="eq";a("select[name=searchOption]",g).parent("span").is(":visible")&&(i=a("select[name=searchOption]",g).val());j.post.searchOps[k].push(i)}j.post.searchAddModifier=a("input[name=addFilters]:checked",f).length;j.post.applySearchFilters=
m.length>0?m.is(":checked")?1:0:1;j.post.page=1;a(d).klearModule("option","dispatchOptions",j).klearModule("reDispatch")});a(".klearMatrixFiltering",f).on("keydown","input.term",function(c){if(c.keyCode==13){var d=a(this);setTimeout(function(){a("span.addTerm",d.parents(".klearMatrixFiltering")).trigger("click")},10);c.preventDefault();c.stopPropagation()}});a(".klearMatrixFiltering input[name=addFilters]",f).on("change",function(){a(".klearMatrixFiltering .filteredFields .field",f).length<=1||a("span.addTerm",
f).trigger("click",true)});m.on("change",function(c){c.stopPropagation();c.preventDefault();a("span.addTerm",f).trigger("click",true)});a(".klearMatrixFiltering .filteredFields",f).on("click",".ui-silk-cancel",function(){var c=a(this).parents("span.field:eq(0)").data("field"),e=a(this).data("idx"),f=a(d).klearModule("option","dispatchOptions");if(f.post.searchFields[c]){f.post.searchFields[c].splice(e,1);f.post.searchOps[c].splice(e,1);f.post.page=1;a(d).klearModule("option","dispatchOptions",f).klearModule("reDispatch")}});
a("button.preconfigureFilters",f).button().on("click",function(c){c.stopPropagation();c.preventDefault();c=a(d).klearModule("option","dispatchOptions");c.post=c.post||{};c.post.searchFields=c.post.searchFields||{};c.post.searchOps=c.post.searchOps||{};var e=a(this).data("field"),g=a(this).data("value"),i="eq";a(this).data("ops")&&(i=a(this).data("ops"));c.post.searchFields[e]=c.post.searchFields[e]||[];c.post.searchOps[e]=c.post.searchOps[e]||[];c.post.searchFields[e].push(g);c.post.searchOps[e].push(i);
c.post.searchAddModifier=a("input[name=addFilters]:checked",f).length;c.post.page=1;a(d).klearModule("option","dispatchOptions",c).klearModule("reDispatch")});a("p.filteredFields span.field",f).each(function(){var c=a("span.content",a(this)),d=a(this).data("field");a("button.preconfigureFilters",f).filter(function(){if(!a(this).data("field")||a(this).data("field")!=d||!a(this).data("value"))return false;var e=a(this).data("value");return c.filter(function(){return e==a(this).data("value")}).length>
0}).button("disable")});a(".klearMatrixFilteringForm",f).form();var h=!1,k=a(".klearMatrixFiltering input.term",f).clone();a(".klearMatrixFiltering select[name=searchField]",f).on("manualchange.searchValues",function(c,d){var g=a.klearmatrix.template.helper.getColumn(e.options.data.columns,a(this).val()),i=a(".klearMatrixFiltering",f),j=a("input.term",i),l=a("span.searchOption",i);if(false!==h){j[h]("destroy");h=false}var m=k.clone(),j=j.replaceWith(m),j=m;g.search=g.search||{};if(g.config&&g.config.plugin&&
g.config.plugin.match(/date|time/g))g.search.options=true;g.search.options?l.show():l.hide();i.find("span.infoShow").remove();i.find("div.infoDiv").remove();if(g.search.info){a("<span />").attr("class","infoShow ui-silk ui-silk-help inline").prependTo(a(".filterItem",i)).on("click",function(){a("div.infoDiv").is(":visible")?a("div.infoDiv").slideUp("fast"):a("div.infoDiv").slideDown("fast")});a("<div>"+g.search.info+"</div>").attr("class","infoDiv hidden").prependTo(a(".filterItem",i))}switch(true){case g.type==
"select":case g.type=="multiselect":var g=a.klearmatrix.template.helper.getValuesFromSelectColumn(g),o=[];a.each(g,function(a,c){o.push({label:c,id:a})});j.autocomplete({minLength:0,source:o,select:function(a,c){j.val(c.item.label);j.data("idItem",c.item.id);return false}}).data("autocomplete")._renderItem=function(c,d){return a("<li></li>").data("item.autocomplete",d).append("<a>"+d.label+"</a>").appendTo(c)};h="autocomplete";break;case g.config&&typeof g.config.plugin=="string":h=i=g.config.plugin;
l=g.config.settings||{};j[i](l);break;case g.search.plugin&&typeof g.search.plugin=="string":i=g.config.plugin;h=g.search.plugin;l=g.search.settings||{};j[g.search.plugin](l)}d!==true&&j.focus()}).trigger("manualchange.searchValues",!0);var l=a(".klearMatrixFiltering .filteredFields",f);a(".klearMatrixFiltering .title",f).on("click",function(){var c=a(this).parents("form:eq(0)"),d=".filterItem";m.is(":checked")==false&&l.find(".field").length>0&&(d=".filteredFields");c.hasClass("not-loaded")?a(d,
c).slideDown(function(){c.removeClass("not-loaded")}):a(d,c).slideUp(function(){c.addClass("not-loaded")})});!1==m.is(":checked")&&0<l.find(".field").length&&(l.css("opacity","0.5"),l.unbind("click"),a(".preconfiguredFilters, .filterItem",f).hide(),a(".klearMatrixFilteringForm:eq(0)",f).addClass("not-loaded"));a("a.option.csv",f).on("click",function(c){c.preventDefault();c.stopPropagation();c=a(d).klearModule("option","dispatchOptions");if(!c.post)c.post={};var f={};a.extend(f,c.post);f.format="csv";
f={file:a(d).klearModule("option","file"),type:"screen",screen:e.options.data.screen,post:f,external:true};if(c.pk!=void 0){f.pk=c.pk;f.screen=c.screen}var g=a(this);g.button("option","disabled",true);a("span.ui-silk",g).addClass("spining");var i=g.attr("title");g.attr("title",a.translate("Loading content")).tooltip();a.klear.request(f,function(){g.button("option","disabled",false);g.tooltip("close").attr("title",i).tooltip();a("span.ui-silk",g).removeClass("spining")},function(){a(d).klearModule("showDialogError",
a.translate("Error download CSV file.")+"<br />"+a.translate("Please contact administrator."),{title:a.translate("Error")});g.button("option","disabled",false);g.tooltip("close").attr("title",i).tooltip();a("span.ui-silk",g).removeClass("spining")})});var o={},p={};a("span.autocomplete",f).each(function(){var c=a(d).klearModule("option","file")+"_"+a(this).data("command");if(!p[c]){var e=a(this).data();e.value=[];e={file:a(d).klearModule("option","file"),type:"command",post:e};if(!a(this).data("command")){a.console.log("ATENCI\u00d3N: El atributo command no est\u00e1 configurado. Se utiliza el valor por defecto: "+
a(this).data("fielddecorator")+"_command");e.command=a(this).data("fielddecorator")+"_command"}p[c]=e;o[c]=[]}p[c].post.value.push(a(this).attr("data-value"));o[c].push(this)});a.each(p,function(c){var d=a.klear.buildRequest(this),e=d.action,e=e+("&"+a.param(d.data));a.getJSON(e,function(d){a.each(o[c],function(){var c=a(this);if(c=d.results["'"+c.attr("data-value")+"'"]){var e=[];if(Object.prototype.toString.call(c)==="[object Array]")for(var f in c)e.push(c[f].label);else e.push(c.label);a(this).replaceWith(e.join(", "))}})})});
return this}}),a.widget.bridge("klearMatrixList",a.klearmatrix.list))})(jQuery);(function load(a){a.klear.checkDeps(["$.klearmatrix.module","$.ui.form","$.fn.autoResize","$.fn.h5Validate","Crypto"],load)&&(a.widget("klearmatrix.edit",a.klearmatrix.module,{options:{data:null,moduleName:"edit",theForm:!1},_super:a.klearmatrix.module.prototype,_create:function(){this._super._create.apply(this)},_formValidationErrors:{customError:a.translate("undefined error"),patternMismatch:a.translate("invalid pattern"),rangeOverflow:a.translate("range overflow"),rangeUnderflow:a.translate("range underflow"),
stepMismatch:a.translate("step mismatch"),tooLong:a.translate("the value is too long"),typeMismatch:a.translate("type mismatched"),valueMissing:a.translate("this is a required field")},_init:function(){this.options.data.title=this.options.data.title||this.element.klearModule("option","title");a.console.info("[klearmatrix.edit] _init"+this.options.data.title);var c=this._loadTemplate(this.options.data.mainTemplate?this.options.data.mainTemplate:"klearmatrixEdit"),d=a(this.element.klearModule("getPanel"));
d.append(c);var e=this;d.one("focusin",function(c){a.console.info("[klearmatrix.edit] focusin "+e.options.data.title);e.element.klearModule("showOverlay");c.preventDefault();c.stopPropagation();e._applyDecorators()._registerReDispatchSavers()._initFormElements()._registerBaseEvents()._registerEvents()._registerFieldsEvents()._registerMainActionEvent();e.element.klearModule("hideOverlay");a(e.element).trigger("moduleInitReady")});d.is(":visible")&&d.trigger("focusin")},_applyDecorators:function(){a(".generalOptionsToolbar a",
this.element.klearModule("getPanel")).each(function(){a(this).button()});return this},_registerReDispatchSavers:function(){a.console.info("[klearmatrix.edit] _registerReDispatchSavers");var c=this;this.element.klearModule("option","PreDispatchMethod",function(){a.console.info("[klearmatrix.edit] PreDispatchMethod exec");this.savedValues={};var d=this;a("select.changed, input.changed, textarea.changed",c.options.theForm).not(".ignoreManualChange").each(function(){d.savedValues[a(this).attr("name")]=
a(this).val()})});this.element.klearModule("option","PostDispatchMethod",function(){a.console.info("[klearmatrix.edit] PostDispatchMethod exec");if(this.savedValues){this.options.theForm=a("form",a(this.options.panel));var c=this.options.theForm;a.each(this.savedValues,function(e,f){var g=a("[name='"+e+"']",c);g.val(f);g.data("recoveredValue",f);g.data("savedValue",(new Date).toString());g.trigger("manualchange")});this.savedValues={};return this}});return this},_registerMainActionEvent:function(){a.console.info("[klearmatrix.edit] _registerMainActionEvent");
var c=this;this.options.theForm.on("submit",function(d){d.preventDefault();d.stopPropagation();if(a(this).h5Validate("allValid")){var e=function(){a(c.element).klearModule("showDialog","<br />",{title:c.options.data.title,template:'<div class="ui-widget">{{html text}}</div>',buttons:[]});a(c.element).klearModule("option","moduleDialog").moduleDialog("setAsLoading");c._doAction.call(c)};if(c.options.data.actionMessages&&c.options.data.actionMessages.before){var f=0;(function i(){if(c.options.data.actionMessages.before[f]){var d=
c.options.data.actionMessages.before[f];f++;a(c.element).klearModule("showDialog","<br />",{title:d.title,template:'<div class="ui-widget">{{html text}}</div>',buttons:[]});var m=a(c.element).klearModule("getModuleDialog"),h=[],k;for(k in d.action)h.push(function(a){return{text:a.label,click:function(){!0===a["return"]&&i();m.moduleDialog("close")}}}(d.action[k]));m.moduleDialog("option","buttons",h);m.moduleDialog("updateContent",d.message)}else e()})()}else e()}});return this},_doAction:function(){a.console.info("[klearmatrix.edit] _doAction");
(function(c){var d=a(c.element),e=d.klearModule("option","moduleDialog"),f=c.options.theForm.serializeArray();a.klear.request({file:d.klearModule("option","file"),type:"screen",execute:"save",pk:c.options.theForm.data("id"),screen:c.options.data.screen,post:f},function(g){if(g.error)c.standardError(g.error);else{var i=d.klearModule("option","parentScreen");i&&i.klearModule("reDispatch");c._initSavedValueHashes();c.options.theForm.trigger("updateChangedState");if(a("input[name=autoclose]",d.klearModule("getPanel")).is(":checked")){e.moduleDialog("close");
d.klearModule("close");return}}e.moduleDialog("option","title","");e.moduleDialog("option","buttons",[{text:a.translate("Close"),click:function(){a(this).moduleDialog("close");d.klearModule("close")}},{text:a.translate("Edit again"),click:function(){a(this).moduleDialog("close");d.klearModule("reDispatch")}}]);e.moduleDialog("updateContent",g.message);d.trigger("postMainActionHook",{data:g,postData:f})},function(a){c.standardError(a)})})(this)},_initSavedValueHashes:function(){a.console.info("[klearmatrix.edit] _initSavedValueHashes");
a("select, input, textarea",this.options.theForm).each(function(){var c=null==a(this).val()?"":a(this).val();null==a(this).val()&&(a(this).data("preload")&&""!=a(this).data("preload"))&&(c=a(this).data("preload").toString());c=Crypto.MD5(c);a(this).data("savedValue",c).trigger("manualchange")});var c=this,d=a('<span class="ui-widget ui-state-error ui-corner-all klearFieldError"><span class="ui-icon ui-icon-alert"></span><span class="content"></span></span>');this.options.theForm.h5Validate({focusout:!1,
focusin:!1,change:!1,keyup:!1,allValidSelectors:"input.hiddenFile, :input:visible:not(:button):not(:disabled):not(.novalidate):not(.ui-autocomplete-input),                     select[required]:not(:disabled):not(.novalidate)"}).on("validated",function(e,f){var g=a(e.target).parents("div:eq(0)");if(!0===f.valid)a(".klearFieldError",g).slideUp(function(){a(this).remove()});else{var i=[];for(errorType in c._formValidationErrors)if(!0===f[errorType]){a(e.target).data("errorTypeMap")&&(errorType=a(e.target).data("errorTypeMap")[errorType]||
errorType);var j=errorType.toLowerCase();a(e.target).data(j)?i.push(a(e.target).data(j)):i.push(c._formValidationErrors[errorType])}0<i.length?(a(".klearFieldError",g).is("span")||g.prepend(d.clone()),a(".klearFieldError .content",g).html(i.join("<br />"))):a(".klearFieldError",g).fadeOut(function(){a(this).remove()})}})},_initFormElements:function(){a.console.info("[klearmatrix.edit] _initFormElements");var c=this.element;this.options.theForm=a("form",a(this.element.klearModule("getPanel")));this.options.theForm.form();
this._initSavedValueHashes();if(this.options.data.fixedPositions&&this.options.data.fixedPositions.length)for(var d in this.options.data.fixedPositions)this._joinFields(this.options.data.fixedPositions[d]);0<a("select.multiselect",this.options.theForm).length&&a("select.multiselect",this.options.theForm).multiselect({container:this.element.klearModule("getPanel"),selectedList:4,selectedText:a.translate("# of # selected"),checkAllText:a.translate("Select all"),uncheckAllText:a.translate("Unselect all"),
noneSelectedText:a.translate("Select an option"),selectedText:a.translate("# selected"),position:{my:"center",at:"center"}}).multiselectfilter();0<a(".jmedia",this.options.theForm).length&&a(".jmedia",this.options.theForm).each(function(){var d={file:c.klearModule("option","file"),pk:a(this).parents("form:eq(0)").data("id"),type:"command",post:"foo=1",command:a(this).data("command")},e=a("<div />");a(this).replaceWith(e);var f="controls"+Math.round(1E3*Math.random(1,1E3));a('<div id="'+f+'" class="ui-button ui-widget ui-state-default ui-corner-all controls"><a href="#" class="jp-play" tabindex="1"><span class="ui-icon ui-icon-play inline"></span></a><a href="#" class="jp-pause" tabindex="2"><span class="ui-icon ui-icon-pause inline"></span></a><div class="jp-progress ui-widget ui-state-default ui-corner-all" ><div class="ui-widget ui-state-active ui-corner-all jp-seek-bar"><div class="ui-widget ui-widget-header jp-play-bar"></div></div></div><div class="jp-volume-bar ui-widget ui-state-active ui-corner-all"><div class="jp-volume-bar-value ui-widget ui-state-active ui-corner-all"></div></div><div class="jp-volumenCtrl"><span class="jp-mute"><span class="ui-icon ui-icon-volume-on inline"></span></span><span class="jp-unmute"><span class="ui-icon ui-icon-volume-off inline"></span></span></div><div class="jp-timers"><span class="jp-current-time"></span> / <span class="jp-duration"></span></div></div>').insertAfter(e);
var g=a.klear.buildRequest(d);e.jPlayer({ready:function(){e.jPlayer("setMedia",{mp3:encodeURI(g.action)}).jPlayer("pause")},play:function(){e.jPlayer("pauseOthers")},ended:function(){e.jPlayer("ready")},cssSelectorAncestor:"#"+f,swfPath:"../klearMatrix/bin/",solution:"html,flash",supplied:"mp3",oggSupport:!1,wmode:"window"})});if(0<a(".password",this.options.theForm).length){var e="new"==this.options.theForm.data("type");a(".password",this.options.theForm).each(function(){var c=a(this),d=c.parent(),
d=a("input:checkbox[rel="+c.attr("name")+"]",d);e?d.parents("span:eq(0)").remove():(a(this).attr("disabled","disabled").addClass("ui-state-disabled"),d.on("change",function(){a(this).is(":checked")?(c.removeAttr("disabled").removeClass("ui-state-disabled"),c.select().trigger("focus")):c.attr("disabled","disabled").addClass("ui-state-disabled")}))})}0<a(".checkbox",this.options.theForm).length&&a(".checkbox",this.options.theForm).each(function(){var c=a(this),d=c.parent();a("input:checkbox[rel="+c.attr("name")+
"]",d).on("change",function(){a(this).is(":checked")?c.val("1"):c.val("0")})});if(0<a(".qq-uploader",this.options.theForm).length){var f=0,g=null;a(".qq-uploader",this.options.theForm).each(function(){var d=a("#"+a(this).attr("rel"));if(0!=d.length){var e=a("<div />");e.attr("rel",a(this).attr("rel")).data("command",a(this).data("command"));a(this).replaceWith(e);d.on("postmanualchange",function(){var c=a("#new_"+a(this).attr("id"));a(this).hasClass("changed")?(c.html(a(this).data("fileDescription")).css("display",
"block"),c.addClass("changed ui-state-highlight")):c.removeClass("changed ui-state-highlight")});var m={file:c.klearModule("option","file"),pk:a(this).parents("form:eq(0)").data("id"),type:"command",command:e.data("command")},m=a.klear.buildRequest(m),h=a("<div />").addClass("buttonHidder").css({position:"absolute",top:"0",left:"0",zIndex:"1000",width:"100%",height:"100%"}),k={disable:function(c){a(".qq-upload-button",c).addClass("ui-state-disabled");a(".qq-upload-button",c).append(h)},enable:function(c){a(".qq-upload-button",
c).removeClass("ui-state-disabled");a(".qq-upload-button .buttonHidder",c).remove()}},l={element:e[0],action:m.action,params:m.data,multiple:!1,messages:{typeError:a.translate("{file} has invalid extension. Only {extensions} are allowed."),sizeError:a.translate("{file} is too large, maximum file size is {sizeLimit}."),minSizeError:a.translate("{file} is too small, minimum file size is {minSizeLimit}."),emptyError:a.translate("{file} is empty, please select files again without it."),onLeave:a.translate("The files are being uploaded, if you leave now the upload will be cancelled.")},
template:'<div class="qq-uploader"><div class="qq-upload-drop-area"><span></span></div><div class="qq-upload-button ui-button ui-widget ui-state-default ui-corner-all"><span class="ui-icon ui-icon-folder-open inline"></span>'+a.translate("Upload File")+'</div><ul class="qq-upload-list"></ul></div>',onComplete:function(e,g,h){f--;a(c).klearModule("unsetUploadInProgress",e);k.enable(a(this._element));e=a(".qq-upload-list",a(this._element));if(h.error)e.empty(),a(c).klearModule("showDialogError",h.message,
{title:a.translate("ERROR")});else{var g=a(".qq-upload-file",e).html(),j=a(".qq-upload-size",e).html();d.val(h.code).data("fileDescription",g+" ("+j+")").trigger("manualchange");e.html("");a(this._element).parent().find("input[type=checkbox]").prop("checked")&&this._options.autoSave.apply(this,[c])}},autoSaveTimeout:null,autoSave:function(c){if(g&&0==f)a(a(c).klearModule("getPanel")).find("form").submit(),this._options.autoSaveTimeout=g=null;else if(g==this._options.autoSaveTimeout){var d=this;g=
setTimeout(function(){d._options.autoSave.apply(d,[c])},1E3);this._options.autoSaveTimeout=g}},onSubmit:function(d){f++;k.disable(a(this._element));a(c).klearModule("setUploadInProgress",d);return!0},onCancel:function(d){0<f&&f--;k.enable(a(this._element));a(c).klearModule("unsetUploadInProgress",d)},onError:function(d){0<f&&f--;g&&clearTimeout(g);k.enable(a(this._element));a(c).klearModule("unsetUploadInProgress",d)},showMessage:function(d){"string"==typeof d&&(a(".qq-upload-list",a(this.element)).html(""),
a(c).klearModule("showDialogError",d,{title:a.translate("ERROR")}))}};d.data("extensions")&&(l.allowedExtensions=d.data("extensions").split(","));(function p(){if(!qq||!qq.FileUploader){this.count++;this.count>10||setTimeout(p,50)}else new qq.FileUploader(l)})()}})}a("input, textarea",this.options.theForm).autoResize({maxWidth:function(){return this.el.parent().width()},onStartCheck:function(){a(this).trigger("manualchange")}}).trigger("paste").end().filter(":not(:disabled)").filter(":not(:hidden)").eq(0).trigger("focusin").select().focus();
d=a('<span title="'+a.translate("Required field")+'" class="ui-icon inline ui-icon-heart"></span>');a("input, textarea, select",this.options.theForm).filter("[required]").filter("[required]").before(d.clone());a("select[required]",this.options.theForm).not("[pattern]").attr("pattern","[^__NULL__].{0,}").data("errorTypeMap",{patternMismatch:"valueMissing"});a("div.expandable",this.options.theForm).each(function(){a(this).hide();a("<div class='container ui-widget-content ui-corner-all'/>").html(a("label:first",
a(this)).clone()).insertAfter(a(this)).find("label:first").addClass("pointer").append('<button class="ui-state-default ui-corner-all right pointer"><span class="ui-icon ui-icon-circle-triangle-s"></span></button>').after("<br />").on("click",function(){a(this).parent("div").slideToggle(150,function(){a(this).prev("div.expandable").slideToggle(150)})});a("label:first",a(this)).append('<button class="ui-state-default ui-corner-all right pointer"><span class="ui-icon ui-icon-circle-triangle-n"></span></button>').after("<br />").on("click",
function(){a(this).parent("div").slideToggle(150,function(){a(this).next("div").slideToggle(150)})});a(this).find("button").on("click",function(a){a.preventDefault()});a(this).next("div").find("button").on("click",function(a){a.preventDefault()})});a("textarea[data-multilang]",this.options.theForm).each(function(){if(a(this).data("setting-collapse-language-boxes")){var c=a(this).attr("id")+"Box",d=a(this).parent("dd").addClass(c),e=d.prev("dt").addClass(c),f=d.parent("dl"),g=null,l=null;0==f.find(".buttonWrapper").length?
(g=Math.random().toString(36).substr(2),l=a("<div />").addClass("buttonWrapper").attr("id",g),l.prependTo(f)):(l=f.find(".buttonWrapper"),g=l.attr("id"));l.buttonset();f=a("<input/>").attr("type","radio").attr("id",c).attr("name",g);!1===d.hasClass("selected")?(d.hide(),e.hide()):f.attr("checked","checked");l.append(f.after(a('<label for="'+c+'" />').html(e.text()))).buttonset("refresh")}});return this},_registerEvents:function(){a.console.info("[klearmatrix.edit] _registerEvents");var c=this,d=this.element.klearModule("getPanel");
this.options.theForm.on("updateChangedState",function(){0<a(".changed",a(this)).length?c.element.klearModule("setAsChanged",function(){c.element.klearModule("showDialog",a.translate("There is unsaved content.")+"<br />"+a.translate("Close the screen?"),{title:a.translate("Attention!"),buttons:[{text:a.translate("Cancel"),click:function(){a(this).moduleDialog("close")}},{text:a.translate("Ignore changes and close"),click:function(){c.element.klearModule("setAsUnChanged");c.element.klearModule("close")}}]});
return!0}):c.element.klearModule("setAsUnChanged")});a(".generalOptionsToolbar a.action",d).on("click",function(a){a.preventDefault();a.stopPropagation();c.options.theForm.trigger("submit")});var e={_getFieldSet:function(a){return a.parents("fieldset.superContainer:eq(0)")},show:function(a){this._getFieldSet(a).slideDown()},hide:function(c){$fSet=this._getFieldSet(c);0==a(".container:visible",$fSet).length&&$fSet.slideUp()}};a(".visualFilter",d).on("manualchange.visualFilter",function(d,f){if(!f||
!a(this).parents("div:eq(0)").is(":hidden")){var g=null,g=a(this).is("input:hidden")?a(this):a("option[value="+a(this).val()+"]",a(this));if(g.data("show")||g.data("hide")){var h=function(c,d){var e=a.trim(c);return""==e?!1:e.match(/^__empty/)?a("div[data-empty="+e+"]",d)||!1:a("label[rel='"+e+"']:eq(0)",d).parents("div:eq(0)")||!1};g.data("show")&&a.each(g.data("show").split(","),function(d,g){var i=h(g,c.options.theForm);i&&(f?(i.show(),e.show(i)):(i.slideDown("normal",function(){a(".visualFilter",
i).trigger("manualchange.visualFilter",!0);e.show(i);i.find("select").each(function(){var c=a(this).data("selectBoxIt");"object"==typeof c&&("selectBox"==c.namespace&&"function"==typeof c.refresh)&&c.refresh()})}).not("div[data-empty]").addClass("ui-state-highlight"),setTimeout(function(){i.removeClass("ui-state-highlight")},1300)))});g.data("hide")&&a.each(g.data("hide").split(","),function(d,g){var i=h(g,c.options.theForm);i&&(f?i.hide(1,function(){e.hide(a(this))}):i.slideUp(function(){e.hide(a(this))}))})}}}).trigger("manualchange.visualFilter",
!0);a("select, input, textarea",this.options.theForm).not(".ignoreManualChange").on("manualchange",function(){var d=null,d=a(this).data("target-for-change")?a(this).data("target-for-change"):a(this),e=a(this).val()?a(this).val():"";a(this).data("savedValue")!=Crypto.MD5(e)?(d.addClass("changed ui-state-highlight"),d.removeClass("ui-state-default"),a(this).addClass("changed")):(d.removeClass("changed ui-state-highlight"),d.addClass("ui-state-default"),a(this).removeClass("changed"));c.options.theForm.trigger("updateChangedState");
a(this).trigger("postmanualchange")});a("select",this.options.theForm).on("change",function(){a(this).trigger("manualchange")});a(".spinnerPreconfiguredValues",this.options.theForm).on("click",function(){var c=a(this);a("input[name="+c.data("field")+"]").val(c.data("value"))});a("select, input, textarea",this.options.theForm).on("keydown",function(a){a.altKey&&(a.ctrlKey&&13==a.which)&&(a.preventDefault(),a.stopPropagation(),c.options.theForm.trigger("submit"))});var f=a('<span title="'+a.translate("Auto-copied field")+
'" class="ui-silk inline ui-silk-page-white-copy copied"></span>');a("dl.multiLanguage dd").on("isCopied",function(){a(this).hasClass("copied")||""!=a("[data-multilang]",a(this)).val()&&a(this).addClass("copied").append(f.clone())}).on("isNotCopied",function(){a(this).removeClass("copied").find("span.copied").remove()});a("dl.multiLanguage input, textarea",this.options.theForm).on("keyup",function(){var c=a(this).parents("dl.multiLanguage:eq(0)");if(a(this).parent("dd").hasClass("selected")){var d=
a(this).val();c.find("dd:not(.selected) [data-multilang]").each(function(){if(""==a(this).val()||a(this).parent("dd").hasClass("copied"))a(this).val(d).trigger("change").trigger("manualChange"),a(this).parent("dd").trigger("isCopied")})}else c=c.find("dd.selected [data-multilang]").val(),a(this).val()!=c?a(this).parent("dd").trigger("isNotCopied"):a(this).parent("dd").trigger("isCopied")}).trigger("keyup");var g=a("input[name=autoclose]",d);g.on("change",function(){localStorage&&localStorage.setItem("klearmatrix.autoclose",
a(this).is(":checked"));g.not(a(this)).trigger("toggleValue")});localStorage&&null!=localStorage.getItem("klearmatrix.autoclose")&&(d="true"==localStorage.getItem("klearmatrix.autoclose"),g.trigger("forceValue",d));a(".multiLanguage .buttonWrapper label",this.options.theForm).on("click",function(){var c=a(this).parent("div").parent("dl"),d=a(this).attr("for");a("dd:visible,dt:visible",c).fadeOut("fast",function(){a("dd."+d+",dt."+d,c).fadeIn("fast")})});a("textarea[maxlength]:not([data-plugin]), input[maxlength]:not([data-plugin])",
this.options.theForm).each(function(){var c=a(this).attr("maxlength")-a(this).val().length;a("p.countdown",a(this).parent()).length==0?a(this).parent().append(a("<p class='countdown' />").css({padding:"0 1.5em","font-size":".8em"}).text(c+" "+a.translate("characters remaining"))):a("p.countdown:first",a(this).parent()).text(c+" characters remaining")}).on("input postmanualchange",function(){var c=a(this).attr("maxlength")-a(this).val().length;a("p.countdown:first",a(this).parent()).text(c+" "+a.translate("characters remaining"))});
return this},_joinFields:function(c){var d=c.fields,e=this.element.klearModule("getPanel"),f=[],g=null,i;for(i in d){if(d[i].field.match(/^__empty/))g=a("<div class='container ui-widget-content' data-empty='"+d[i].field+"' />");else if(g=a("label[rel="+d[i].field+"]",e).parents(".container:eq(0)"),1!=g.length)continue;g.data("numberWidth",d[i].weight);f.push(g)}if(0!=f.length){var j=0.9*Math.floor(100/c.colsPerRow),$superContainer=a("<fieldset />").addClass("superContainer ui-widget-content ui-corner-all");
c.label&&a("<legend>"+c.label+"</label>").addClass("ui-widget-content ui-corner-all").appendTo($superContainer);f[0].data("empty")&&f[1]?f[1].before($superContainer):f[0].before($superContainer);a.each(f,function(){a(this).addClass("containerFixed").appendTo($superContainer);var c=j*a(this).data("numberWidth");a(this).css({width:c+"%"})});a("select.multiselect",$superContainer).trigger("postmanualchange")}}}),a.widget.bridge("klearMatrixEdit",a.klearmatrix.edit))})(jQuery);(function load(a){a.klear.checkDeps(["$.klearmatrix.edit"],load)&&(a.widget("klearmatrix.new",a.klearmatrix.edit,{options:{data:null,moduleName:"new"},_super:a.klearmatrix.module.prototype,_create:function(){this._super._create.apply(this)},_init:function(){this.options.data.title=this.options.data.title||this.element.klearModule("option","title");a.console.info("[klearmatrix.new] _init"+this.options.data.title);a.extend(this.options.data,{randIden:Math.round(1E5*Math.random(1E3,9999))});var c=this._loadTemplate(this.options.data.mainTemplate?
this.options.data.mainTemplate:"klearmatrixNew"),d=a(this.element.klearModule("getPanel"));d.append(c);var e=this;d.one("focusin",function(c){a.console.info("[klearmatrix.new] focusin "+e.options.data.title);e.element.klearModule("showOverlay");c.preventDefault();c.stopPropagation();e._applyDecorators()._registerReDispatchSavers()._initFormElements()._registerBaseEvents()._registerEvents()._registerFieldsEvents()._registerMainActionEvent();e.element.klearModule("hideOverlay");a(e.element).trigger("moduleInitReady")});
d.is(":visible")&&d.trigger("focusin")},_doAction:function(){a.console.info("[klearmatrix.new] _doAction");var c=this,d=a(this.element),e=d.klearModule("getModuleDialog"),f=c.options.theForm.serializeArray(),g=!c.options.theForm.data("disableaddanother");"undefined"!=typeof this.options.data.parentId&&f.push({name:this.options.data.parentItem,value:this.options.data.parentId});c.options.data.parentPk&&f.push({name:"parentPk",value:c.options.data.parentPk});a.klear.request({file:d.klearModule("option",
"file"),type:"screen",execute:"save",screen:c.options.data.screen,post:f},function(i){if(!i.error&&(d.klearModule("option","parentScreen").klearModule("reDispatch"),a("input,select,textarea",c.options.theForm).val(""),c._initSavedValueHashes(),c.options.theForm.trigger("updateChangedState"),a("input[name=autoclose]",d.klearModule("getPanel")).is(":checked"))){e.moduleDialog("close");d.klearModule("close");return}var j=[{text:a.translate("Close"),click:function(){a(this).moduleDialog("close");d.klearModule("close")}}];
g?j.push({text:a.translate("Add another record"),click:function(){d.klearModule("reDispatch")}}):e.moduleDialog("option","beforeClose",function(){d.klearModule("close")});e.moduleDialog("option","beforeClose",function(){d.klearModule("reDispatch")});e.moduleDialog("option","buttons",j);e.moduleDialog("updateContent",i.message,function(){c._registerBaseEvents();c._registerFieldsEvents()});d.trigger("postMainActionHook",{data:i,postData:f})},function(a){c.standardError(a)})}}),a.widget.bridge("klearMatrixNew",
a.klearmatrix["new"]))})(jQuery);(function load(a){a.klear.checkDeps(["$.klearmatrix.module","$.ui.form"],load)&&(a.widget("klearmatrix.dashboard",a.klearmatrix.module,{options:{data:null,moduleName:"dashboard"},_super:a.klearmatrix.module.prototype,_create:function(){this._super._create.apply(this)},_init:function(){var c=this._loadTemplate("klearmatrixDashboard");a(this.element.klearModule("getPanel")).append(c);this._applyDecorators()._registerBaseEvents()._registerEvents()._css3Columns()},_applyDecorators:function(){var c=a(this.element.klearModule("getPanel"));
a(".generalOptionsToolbar .action, .generalOptionsToolbar a",c).button();return this},_registerEvents:function(){a(this.element.klearModule("getPanel"));return this},_css3Columns:function(){var c=a(this.element.klearModule("getPanel")).find("div.klearMatrixDashboard > div"),d=c.children("fieldset"),e=d.filter(":eq(0)"),f=e.width(),g=["-moz","-webkit","-o","-ms","-khtml"];for(prefix in g)f=prefix+"-column-width",c.css({boxWidth:"300px"});c.css({"column-width":"300px"});for(prefix in g)d.css({boxColumnBreak:"avoid"});
d.css({"column-break-inside":"avoid"});f!=e.width()&&(d.removeClass("legacy"),d.css({width:"85%"}));return this}}),a.widget.bridge("dashboard",a.klearmatrix.dashboard))})(jQuery);(function(){$.klear=$.klear||{};$.klear.baseurl=$.klear.baseurl||$("base").attr("href");$.klear.loadedTemplates=$.klear.loadedTemplates||{};var b={"jsFile_-1824558962":"2.5.3-crypto-md5.js",jsFile_472193935:"jquery.autoresize.js",jsFile_801193221:"jquery.h5validate.js",jsFile_1965225950:"jquery.jplayer.min.js",jsFile_53406754:"jquery.multiselect.filter.js",jsFile_381177282:"jquery.multiselect.js","jsFile_-1184596132":"jquery.ui.form.js","jsFile_-1960768398":"jquery.ui.spinner.js",jsFile_761451189:"qq-fileuploader.js",
jsFile_395628695:"jquery.klearmatrix.module.js","jsFile_-1818335427":"jquery.klearmatrix.genericdialog.js",jsFile_1150212397:"jquery.klearmatrix.template.helper.js",jsFile_694066308:"jquery.klearmatrix.list.js",jsFile_705185194:"jquery.klearmatrix.edit.js",jsFile_506478294:"jquery.klearmatrix.new.js","jsFile_-1878899213":"jquery.klearmatrix.dashboard.js",jsFile_1575925159:"jquery.klearmatrix.genericscreen.js"},a;for(a in b)$.klear.loadedScripts[a]=!0;$.ajax({url:$.klear.baseurl+"../klearMatrix/template/cache",
dataType:"json",success:function(a){if(a.templates)for(var b in a.templates)$.template(b,a.templates[b]),$.klear.loadedTemplates[b]=!0}})})();
